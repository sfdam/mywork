<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>SendEmail</name>
        <label>SendEmail</label>
        <locationX>644</locationX>
        <locationY>2462</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>EmailList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Richiesta di approvazione Pricing</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>PricingBodyEmail</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>SendEmail1</name>
        <label>SendEmail</label>
        <locationX>204</locationX>
        <locationY>2354</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>EmailList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Richiesta di approvazione Pricing</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>PricingBodyEmail</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assign</name>
        <label>Assign</label>
        <locationX>578</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>GetSimulazione.Spread_medio_ponderato__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Spread_Tasso_medio1</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetSimulazione.RWA_Medio_perc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RWA_medioValue</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetSimulazione.Importo_totale_operazione__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Importo_BPER1</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Simulazione</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Opp_to_Simulazione</name>
        <label>Assign Opp to Simulazione</label>
        <locationX>50</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>GetSimulazione.Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetSimulazione.Principale__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetSimulazione.Spread_medio_ponderato__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Spread_Tasso_medio</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetSimulazione.RWA_Medio_perc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RWAmedioValue</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetSimulazione.Importo_totale_operazione__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Importo_BPER</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Simulazione</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Simulazione</name>
        <label>Assign Simulazione</label>
        <locationX>578</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>GetSimulazione.Importo_totale_operazione__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetOpportunity.Importo_BPER__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Simulazione_Exist</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Task</name>
        <label>Assign Task</label>
        <locationX>578</locationX>
        <locationY>1406</locationY>
        <assignmentItems>
            <assignToReference>GetTaskPricing.ActivityDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DueDateTask</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetTaskPricing.WhatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetTaskPricing.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetTaskPricing.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Approvazione proposta Pricing</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetTaskPricing.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetGroup.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>GetTaskPricing.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetRecordTypeTask.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AssignEmailList</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_TaskCreateNewTask</name>
        <label>Assign Task</label>
        <locationX>512</locationX>
        <locationY>2054</locationY>
        <assignmentItems>
            <assignToReference>CreateNewTask.ActivityDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DueDateTask</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CreateNewTask.WhatId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CreateNewTask.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CreateNewTask.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Approvazione proposta Pricing</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CreateNewTask.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetGroup.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CreateNewTask.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetRecordTypeTask.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>InvioDeskRPES1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignEmailList</name>
        <label>AssignEmailList</label>
        <locationX>578</locationX>
        <locationY>1514</locationY>
        <assignmentItems>
            <assignToReference>EmailList</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>andrea.nozza@bper.it</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailList</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>andreasalvatore.dazio@bper.it</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailList</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>marco.comelli@bper.it</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailList</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>matteo.ajelli@bper.it</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>EmailList</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>marco.sterza@bper.it</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Task_Pricing_Exist</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_Simulazione_Exist</name>
        <label>Check Simulazione Exist</label>
        <locationX>578</locationX>
        <locationY>674</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Not_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetSimulazione.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ViewScreen</targetReference>
            </connector>
            <label>Not Exist</label>
        </rules>
        <rules>
            <name>Task_Create_not_processed_approvato</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetSimulazione.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetTaskPricing.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetTaskPricing.Pricing_Approvato__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ViewScreen1</targetReference>
            </connector>
            <label>Task Create/ not processed / approvato</label>
        </rules>
        <rules>
            <name>Approvato</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetTaskPricing.Pricing_Approvato__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approvato</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetSimulazione.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetTaskPricing.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ViewScreen_Approvato</targetReference>
            </connector>
            <label>Approvato</label>
        </rules>
        <rules>
            <name>Pricing_not_approved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetSimulazione.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetTaskPricing.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetTaskPricing.Pricing_Approvato__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Non Approvato</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ViewScreen2</targetReference>
            </connector>
            <label>Pricing not approved</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Task1</name>
        <label>Check Task</label>
        <locationX>644</locationX>
        <locationY>1838</locationY>
        <defaultConnector>
            <targetReference>InvioDeskRPES1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>is_null1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Create_Task1</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Task1</targetReference>
            </connector>
            <label>is null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Task_Pricing_Exist</name>
        <label>Check Task Pricing Exist</label>
        <locationX>578</locationX>
        <locationY>1622</locationY>
        <defaultConnector>
            <targetReference>TaskLabelGiaEsistente</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>not_exist1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetTaskPricing.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetRecord</targetReference>
            </connector>
            <label>not exist</label>
        </rules>
        <rules>
            <name>Nuova_Proposta_Pricing</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>GetTaskPricing.Pricing_Approvato__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Non Approvato</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetTaskPricing.Pricing_Approvato__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approvato</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Create_Task1</targetReference>
            </connector>
            <label>Nuova Proposta Pricing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_TaskId</name>
        <label>Check TaskId</label>
        <locationX>204</locationX>
        <locationY>1838</locationY>
        <defaultConnector>
            <targetReference>InvioDeskRPES</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>is_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_TaskFirst</targetReference>
            </connector>
            <label>is null</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>DueDateTask</name>
        <dataType>Date</dataType>
        <expression>ADDMONTHS(NOW(),1)</expression>
    </formulas>
    <formulas>
        <name>URLOpp</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!GetOpportunity.CIB_URL__c}, &apos;my.salesforce&apos;, &apos;lightning.force&apos;)+&apos;/&apos;+{!GetOpportunity.Id}</expression>
    </formulas>
    <formulas>
        <name>URLTask</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!GetOpportunity.CIB_URL__c}, &apos;my.salesforce&apos;, &apos;lightning.force&apos;)+&apos;/&apos;+{!taskId}</expression>
    </formulas>
    <formulas>
        <name>URLUser</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!GetOpportunity.CIB_URL__c}, &apos;my.salesforce&apos;, &apos;lightning.force&apos;)+&apos;/&apos;+{!$User.Id}</expression>
    </formulas>
    <interviewLabel>CIB Simulazione Flow {!$Flow.CurrentDateTime}</interviewLabel>
    <isAdditionalPermissionRequiredToRun>true</isAdditionalPermissionRequiredToRun>
    <label>Pricing CIB</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Simulazione</name>
        <label>Create Simulazione</label>
        <locationX>50</locationX>
        <locationY>1106</locationY>
        <connector>
            <targetReference>GetGroup</targetReference>
        </connector>
        <inputReference>GetSimulazione</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Task1</name>
        <label>Create Task</label>
        <locationX>512</locationX>
        <locationY>1946</locationY>
        <assignRecordIdToReference>taskId</assignRecordIdToReference>
        <connector>
            <targetReference>Assign_TaskCreateNewTask</targetReference>
        </connector>
        <inputAssignments>
            <field>ActivityDate</field>
            <value>
                <elementReference>DueDateTask</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>GetGroup.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>GetRecordTypeTask.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Approvazione proposta Pricing</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
    </recordCreates>
    <recordCreates>
        <name>Create_TaskFirst</name>
        <label>Create Task</label>
        <locationX>72</locationX>
        <locationY>1946</locationY>
        <assignRecordIdToReference>taskId</assignRecordIdToReference>
        <connector>
            <targetReference>InvioDeskRPES</targetReference>
        </connector>
        <inputAssignments>
            <field>ActivityDate</field>
            <value>
                <elementReference>DueDateTask</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>GetGroup.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>GetRecordTypeTask.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Approvazione proposta Pricing</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
    </recordCreates>
    <recordLookups>
        <name>Get_Create_Task1</name>
        <label>Get Create_Task1</label>
        <locationX>644</locationX>
        <locationY>1730</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Task1</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WhatId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetRecordTypeTask.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Pricing_Approvato__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Task</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetGroup</name>
        <label>GetGroup</label>
        <locationX>578</locationX>
        <locationY>1298</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Task</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>CIB_Pricing_Queue</stringValue>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Queue</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Group</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetOpportunity</name>
        <label>GetOpportunity</label>
        <locationX>578</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetSimulazione</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetRecord</name>
        <label>GetRecord</label>
        <locationX>204</locationX>
        <locationY>1730</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_TaskId</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WhatId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetRecordTypeTask.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Pricing_Approvato__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Task</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetRecordTypeTask</name>
        <label>GetRecordTypeTask</label>
        <locationX>578</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetTaskPricing</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Task</stringValue>
            </value>
        </filters>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Approvazione_Pricing</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetSimulazione</name>
        <label>GetSimulazione</label>
        <locationX>578</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetRecordTypeTask</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Simulazione__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetTaskPricing</name>
        <label>GetTaskPricing</label>
        <locationX>578</locationX>
        <locationY>458</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Simulazione</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WhatId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetRecordTypeTask.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Task</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Simulazione</name>
        <label>Update Simulazione</label>
        <locationX>578</locationX>
        <locationY>1106</locationY>
        <connector>
            <targetReference>GetGroup</targetReference>
        </connector>
        <inputReference>GetSimulazione</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateOpp</name>
        <label>UpdateOpp</label>
        <locationX>644</locationX>
        <locationY>2354</locationY>
        <connector>
            <targetReference>SendEmail</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetOpportunity.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Duration_Pricing__c</field>
            <value>
                <elementReference>GetSimulazione.Duration_Number__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EVA__c</field>
            <value>
                <elementReference>GetSimulazione.EVA__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Linee__c</field>
            <value>
                <elementReference>GetSimulazione.Linee__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NOPAT_Attualizzato__c</field>
            <value>
                <elementReference>GetSimulazione.NOPAT__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pricing_Approvato__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RARORAC__c</field>
            <value>
                <elementReference>GetSimulazione.Present_RARORAC__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RWA_medio__c</field>
            <value>
                <elementReference>GetSimulazione.RWA_Medio_perc__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SML_annuo__c</field>
            <value>
                <elementReference>GetSimulazione.SML_annuo__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Spread_Tasso_medio__c</field>
            <value>
                <elementReference>GetSimulazione.Spread_medio_ponderato__c</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateOpp1</name>
        <label>UpdateOpp</label>
        <locationX>204</locationX>
        <locationY>2246</locationY>
        <connector>
            <targetReference>SendEmail1</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetOpportunity.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Duration_Number__c</field>
            <value>
                <elementReference>GetSimulazione.Duration_Number__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EVA__c</field>
            <value>
                <elementReference>GetSimulazione.EVA__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Linee__c</field>
            <value>
                <elementReference>GetSimulazione.Linee__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NOPAT_Attualizzato__c</field>
            <value>
                <elementReference>GetSimulazione.NOPAT__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RARORAC__c</field>
            <value>
                <elementReference>GetSimulazione.Present_RARORAC__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RWA_medio__c</field>
            <value>
                <elementReference>GetSimulazione.RWA_Medio_perc__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SML_annuo__c</field>
            <value>
                <elementReference>GetSimulazione.SML_annuo__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Spread_Tasso_medio__c</field>
            <value>
                <elementReference>GetSimulazione.Spread_medio_ponderato__c</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <runInMode>DefaultMode</runInMode>
    <screens>
        <name>FirstScreen</name>
        <label>FirstScreen</label>
        <locationX>50</locationX>
        <locationY>890</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Assign_Opp_to_Simulazione</targetReference>
        </connector>
        <fields>
            <name>Simulazione</name>
            <fieldText>Simulazione</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Simulazione_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Importo_BPER</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>GetOpportunity.Importo_BPER__c</elementReference>
                    </defaultValue>
                    <fieldText>Importo BPER</fieldText>
                    <fieldType>InputField</fieldType>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.SML_annuo__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.Linee__c</objectFieldReference>
                </fields>
                <fields>
                    <name>Spread_Tasso_medio</name>
                    <dataType>Number</dataType>
                    <fieldText>Spread/Tasso medio</fieldText>
                    <fieldType>InputField</fieldType>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Simulazione_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.Duration_Number__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.NOPAT__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.Present_RARORAC__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.EVA__c</objectFieldReference>
                </fields>
                <fields>
                    <name>RWAmedioValue</name>
                    <dataType>Number</dataType>
                    <fieldText>RWA medio %</fieldText>
                    <fieldType>InputField</fieldType>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Salva</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>FirstScreenRenterValue</name>
        <label>FirstScreen</label>
        <locationX>578</locationX>
        <locationY>890</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Assign</targetReference>
        </connector>
        <fields>
            <name>Copy_1_of_Simulazione</name>
            <fieldText>Simulazione</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Copy_1_of_Simulazione_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Importo_BPER1</name>
                    <dataType>Number</dataType>
                    <defaultValue>
                        <elementReference>GetOpportunity.Importo_BPER__c</elementReference>
                    </defaultValue>
                    <fieldText>Importo BPER</fieldText>
                    <fieldType>InputField</fieldType>
                    <isRequired>true</isRequired>
                    <scale>0</scale>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.SML_annuo__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.Linee__c</objectFieldReference>
                </fields>
                <fields>
                    <name>Spread_Tasso_medio1</name>
                    <dataType>Number</dataType>
                    <fieldText>Spread/Tasso medio</fieldText>
                    <fieldType>InputField</fieldType>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Copy_1_of_Simulazione_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.Duration_Number__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.NOPAT__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.Present_RARORAC__c</objectFieldReference>
                </fields>
                <fields>
                    <fieldType>ObjectProvided</fieldType>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>false</isRequired>
                    <objectFieldReference>GetSimulazione.EVA__c</objectFieldReference>
                </fields>
                <fields>
                    <name>RWA_medioValue</name>
                    <dataType>Number</dataType>
                    <fieldText>RWA medio %</fieldText>
                    <fieldType>InputField</fieldType>
                    <isRequired>true</isRequired>
                    <scale>2</scale>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Salva</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>InvioDeskRPES</name>
        <label>InvioDeskRPES</label>
        <locationX>204</locationX>
        <locationY>2138</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>UpdateOpp1</targetReference>
        </connector>
        <fields>
            <name>LabelInvioRequest</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(255, 0, 0);&quot;&gt;Prima di procedere con la richiesta di validazione del Pricing all&apos;ufficio Reporting Pricing &amp;amp; Sinergie, deve essere caricato il file riguardante la Simulazione.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>File_Simulazione_Pricing</name>
            <extensionName>forceContent:fileUpload</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>File Simulazione Pricing</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>taskId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>multiple</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <nextOrFinishButtonLabel>Invio in Approvazione</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>InvioDeskRPES1</name>
        <label>InvioDeskRPES</label>
        <locationX>644</locationX>
        <locationY>2246</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>UpdateOpp</targetReference>
        </connector>
        <fields>
            <name>Copy_1_of_LabelInvioRequest</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(255, 0, 0); background-color: rgb(255, 255, 255);&quot;&gt;Prima di procedere con la richiesta di validazione del Pricing all&apos;ufficio Reporting Pricing &amp;amp; Sinergie, deve essere caricato il file riguardante la Simulazione.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Copy_1_of_File_Simulazione_Pricing</name>
            <extensionName>forceContent:fileUpload</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>File Simulazione Pricing</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>taskId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>multiple</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <nextOrFinishButtonLabel>Invio in Approvazione</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>TaskLabelGiaEsistente</name>
        <label>TaskLabelGiaEsistente</label>
        <locationX>952</locationX>
        <locationY>1730</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>LabelGiaInviato</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(255, 0, 0);&quot;&gt;E&apos; stato gi inviato in approvazione un Pricing per questa Opportunit. E&apos; necessario attendere il completamento della revisione da parte dell&apos;ufficio Reporting Pricing &amp;amp; Sinergie.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>ViewScreen</name>
        <label>ViewScreen</label>
        <locationX>50</locationX>
        <locationY>782</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>FirstScreen</targetReference>
        </connector>
        <fields>
            <name>SimulazioneView</name>
            <fieldText>Simulazione</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>SimulazioneView_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Importo</name>
                    <fieldText>&lt;p&gt;Importo BPER: {!GetOpportunity.Importo_BPER__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>SMLannuo</name>
                    <fieldText>&lt;p&gt;SML annuo (): {!GetSimulazione.SML_annuo__c} &lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Linee</name>
                    <fieldText>&lt;p&gt;#Linee: {!GetSimulazione.Linee__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Spread</name>
                    <fieldText>&lt;p&gt;Spread/Tasso medio: {!GetSimulazione.Spread_medio_ponderato__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>SimulazioneView_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Duration</name>
                    <fieldText>&lt;p&gt;Duration: {!GetSimulazione.Duration_Number__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>NOPAD</name>
                    <fieldText>&lt;p&gt;NOPAT Attualizzato: {!GetSimulazione.NOPAT__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>RARORACPERC</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;RARORAC %&lt;/span&gt;: {!GetSimulazione.Present_RARORAC__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>EVA</name>
                    <fieldText>&lt;p&gt;EVA: {!GetSimulazione.EVA__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>RWAmedio</name>
                    <fieldText>&lt;p&gt;RWA medio %: {!GetSimulazione.RWA_Medio_perc__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Inserisci info Pricing</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>ViewScreen1</name>
        <label>ViewScreen</label>
        <locationX>314</locationX>
        <locationY>782</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Indietro</backButtonLabel>
        <connector>
            <targetReference>GetGroup</targetReference>
        </connector>
        <fields>
            <name>InApprovazioneView</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(255, 0, 0);&quot;&gt;Pricing inviato, in attesa di Approvazione&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>GetTaskPricing.Pricing_Approvato__c</leftValueReference>
                    <operator>EqualTo</operator>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Copy_1_of_SimulazioneView</name>
            <fieldText>Simulazione</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Copy_1_of_SimulazioneView_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Copy_1_of_Importo</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;Importo BPER&lt;/span&gt;: {!GetOpportunity.Importo_BPER__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>SMLannuo1</name>
                    <fieldText>&lt;p&gt;SML annuo (): {!GetSimulazione.SML_annuo__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Linee1</name>
                    <fieldText>&lt;p&gt;#Linee: {!GetSimulazione.Linee__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_1_of_Spread</name>
                    <fieldText>&lt;p&gt;Spread/Tasso medio: {!GetSimulazione.Spread_medio_ponderato__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Copy_1_of_SimulazioneView_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Copy_1_of_Duration</name>
                    <fieldText>&lt;p&gt;Duration: {!GetSimulazione.Duration_Number__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_1_of_NOPAD</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;NOPAT Attualizzato&lt;/span&gt;: {!GetSimulazione.NOPAT__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_1_of_RARORACPERC</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;RARORAC %&lt;/span&gt;: {!GetSimulazione.Present_RARORAC__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>EVA1</name>
                    <fieldText>&lt;p&gt;EVA: {!GetSimulazione.EVA__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>RWAmedio1</name>
                    <fieldText>&lt;p&gt;RWA medio %: {!GetSimulazione.RWA_Medio_perc__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Aggiorna per vedere lo stato di Approvazione</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>ViewScreen2</name>
        <label>ViewScreen</label>
        <locationX>842</locationX>
        <locationY>782</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>FirstScreenRenterValue</targetReference>
        </connector>
        <fields>
            <name>PricingNotApprovedView</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(255, 0, 0);&quot;&gt;Pricing non Approvato, necessario inserire una nuova simulazione.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Copy_2_of_SimulazioneView</name>
            <fieldText>Simulazione</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Copy_2_of_SimulazioneView_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Copy_2_of_Importo</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;Importo BPER&lt;/span&gt;: {!GetOpportunity.Importo_BPER__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>SMLannuo3</name>
                    <fieldText>&lt;p&gt;SML annuo (): {!GetSimulazione.SML_annuo__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Linee3</name>
                    <fieldText>&lt;p&gt;#Linee: {!GetSimulazione.Linee__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_2_of_Spread</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;Spread/Tasso medio&lt;/span&gt;: {!GetSimulazione.Spread_medio_ponderato__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Copy_2_of_SimulazioneView_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Copy_2_of_Duration</name>
                    <fieldText>&lt;p&gt;Duration: {!GetSimulazione.Duration_Number__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_2_of_NOPAD</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;NOPAT Attualizzato: &lt;/span&gt; {!GetSimulazione.NOPAT__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_2_of_RARORACPERC</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;RARORAC %&lt;/span&gt;: {!GetSimulazione.Present_RARORAC__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>EVA3</name>
                    <fieldText>&lt;p&gt;EVA: {!GetSimulazione.EVA__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>RWAmedio3</name>
                    <fieldText>&lt;p&gt;RWA medio %: {!GetSimulazione.RWA_Medio_perc__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Inserisci nuovi info Pricing</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>ViewScreen_Approvato</name>
        <label>ViewScreen Approvato</label>
        <locationX>578</locationX>
        <locationY>782</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>FirstScreenRenterValue</targetReference>
        </connector>
        <fields>
            <name>Copy_1_of_DisplayApprovato</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;color: rgb(35, 199, 32);&quot;&gt;Pricing Approvato&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>GetTaskPricing.Pricing_Approvato__c</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <stringValue>Approvato</stringValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Copy_1_of_Copy_1_of_SimulazioneView</name>
            <fieldText>Simulazione</fieldText>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Copy_1_of_Copy_1_of_SimulazioneView_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Copy_1_of_Copy_1_of_Importo</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;Importo BPER&lt;/span&gt;: {!GetOpportunity.Importo_BPER__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>SMLannuo2</name>
                    <fieldText>&lt;p&gt;SML annuo (): {!GetSimulazione.SML_annuo__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Linee2</name>
                    <fieldText>&lt;p&gt;#Linee: {!GetSimulazione.Linee__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_1_of_Copy_1_of_Spread</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;Spread/Tasso medio&lt;/span&gt;: {!GetSimulazione.Spread_medio_ponderato__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>Copy_1_of_Copy_1_of_SimulazioneView_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>Copy_1_of_Copy_1_of_Duration</name>
                    <fieldText>&lt;p&gt;Duration: {!GetSimulazione.Duration_Number__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_1_of_Copy_1_of_NOPAD</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;NOPAT Attualizzato&lt;/span&gt;: {!GetSimulazione.NOPAT__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_1_of_Copy_1_of_RARORACPERC</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;RARORAC %&lt;/span&gt;: {!GetSimulazione.Present_RARORAC__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>EVA2</name>
                    <fieldText>&lt;p&gt;EVA: {!GetSimulazione.EVA__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>RWAmedio2</name>
                    <fieldText>&lt;p&gt;RWA medio %: {!GetSimulazione.RWA_Medio_perc__c}&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>6</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Sottometti Nuovo Pricing</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>452</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>GetOpportunity</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>PricingBodyEmail</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Salve,&lt;/p&gt;&lt;p&gt;le comunichiamo che  stata inviata su Salesforce una nuova richiesta di approvazione del pricing da parte di &lt;a href=&quot;{!URLUser}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;{!$User.FirstName} {!$User.LastName}&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Societ Cliente : {!GetOpportunity.Account.Name}&lt;/p&gt;&lt;p&gt;Nome Opportunit&amp;nbsp;: {!GetOpportunity.CIB_Nome_Opportunita__c}&lt;/p&gt;&lt;p&gt;Id Opportunit : {!GetOpportunity.Name}&lt;/p&gt;&lt;p&gt;Tipo Operazione : {!GetOpportunity.RecordTypeName__c}&lt;/p&gt;&lt;p&gt;Tipo Prodotto : {!GetOpportunity.Prodotto__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; possibile visualizzare le informazioni di dettaglio e procedere con l&apos;approvazione mediante il seguente &lt;a href=&quot;{!URLTask}&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;link&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Cordiali Saluti,&lt;/p&gt;&lt;p&gt;Team Salesforce&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>CreateNewTask</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Task</objectType>
    </variables>
    <variables>
        <name>CurrentSimulazione</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Simulazione__c</objectType>
    </variables>
    <variables>
        <name>CurrentTask</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Task</objectType>
    </variables>
    <variables>
        <name>EmailList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>taskId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
