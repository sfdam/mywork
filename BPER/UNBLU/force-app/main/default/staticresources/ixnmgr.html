<!DOCTYPE html>
<html>
    <head>
        <script>
            /*!
    * wavesurfer.js 4.2.0 (2020-10-20)
    * https://wavesurfer-js.org
    * @license BSD-3-Clause
    */
    !function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("WaveSurfer",[],t):"object"==typeof exports?exports.WaveSurfer=t():e.WaveSurfer=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return d.default}});var r=p(n(1)),i=p(n(8)),a=p(n(9)),s=p(n(2)),o=p(n(3)),u=p(n(4)),l=p(n(10)),c=p(n(11)),f=p(n(12)),h=p(n(13)),d=p(n(14));function p(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e="wavesurfer_");return e+Math.random().toString(32).substring(2)},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledEventEmissions=[],this.handlers=null}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){var n=this;this.handlers||(this.handlers={});var r=this.handlers[e];return r||(r=this.handlers[e]=[]),r.push(t),{name:e,callback:t,un:function(e,t){return n.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var n,r=this.handlers[e];if(r)if(t)for(n=r.length-1;n>=0;n--)r[n]==t&&r.splice(n,1);else r.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];t.apply(n,a),setTimeout((function(){n.un(e,r)}),0)}))}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.handlers&&!this._isDisabledEventEmission(e)){var i=this.handlers[e];i&&i.forEach((function(e){e.apply(void 0,n)}))}}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach((function(n){e.style[n]!==t[n]&&(e.style[n]=t[n])})),e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(0));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d="playing",p="paused",v="finished",y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,e);var t=c(n);function n(e){var r,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(a=t.call(this)).audioContext=null,a.offlineAudioContext=null,a.stateBehaviors=(s(r={},d,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),s(r,p,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),s(r,v,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),r),a.params=e,a.ac=e.audioContext||(a.supportsWebAudio()?a.getAudioContext():{}),a.lastPlay=a.ac.currentTime,a.startPosition=0,a.scheduledPause=null,a.states=(s(i={},d,Object.create(a.stateBehaviors.playing)),s(i,p,Object.create(a.stateBehaviors.paused)),s(i,v,Object.create(a.stateBehaviors.finished)),i),a.buffer=null,a.filters=[],a.gainNode=null,a.mergedPeaks=null,a.offlineAc=null,a.peaks=null,a.playbackRate=1,a.analyser=null,a.scriptNode=null,a.source=null,a.splitPeaks=[],a.state=null,a.explicitDuration=e.duration,a.destroyed=!1,a}return u(n,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}}]),u(n,[{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(p),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach((function(e){e&&e.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce((function(e,t){return e.connect(t),t}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(n.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(n.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(v),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states.playing&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=function(){}}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){if(e){var t=new window.Audio;if(!t.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));t.autoplay=!0;var n=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(n),t.srcObject=n.stream,t.setSinkId(e)}return Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,n){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"AudioContext"in window?this.offlineAc.decodeAudioData(e).then((function(e){return t(e)})).catch((function(e){return n(e)})):this.offlineAc.decodeAudioData(e,(function(e){return t(e)}),n)}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,n=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<n;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,n){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,n=n||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var r=this.createBuffer(1,4096,this.sampleRate);this.buffer=r.buffer}var i,a=this.buffer.length/e,s=~~(a/10)||1,o=this.buffer.numberOfChannels;for(i=0;i<o;i++){var u=this.splitPeaks[i],l=this.buffer.getChannelData(i),c=void 0;for(c=t;c<=n;c++){var f=~~(c*a),h=~~(f+a),d=l[f],p=d,v=void 0;for(v=f;v<h;v+=s){var y=l[v];y>p&&(p=y),y<d&&(d=y)}u[2*c]=p,u[2*c+1]=d,(0==i||p>this.mergedPeaks[2*c])&&(this.mergedPeaks[2*c]=p),(0==i||d<this.mergedPeaks[2*c+1])&&(this.mergedPeaks[2*c+1]=d)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState(p),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var n=this.seekTo(e,t);e=n.start,t=n.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState(d),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(p),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){e=e||1,this.isPaused()?this.playbackRate=e:(this.pause(),this.playbackRate=e,this.play())}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}]),n}(r.Observer);t.default=y,y.scriptBufferSize=256,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(5))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,r,i=f(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return t=s,(n=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach((function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])}))}},{key:"createTimer",value:function(){var e=this;this.on("play",(function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),a.frame(t)())})),this.on("pause",(function(){e.fireEvent("audioprocess",e.getCurrentTime())}))}},{key:"load",value:function(e,t,n,r){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==r?"auto":r,i.src=e,i.style.width="100%";var a=t.querySelector(this.mediaType);a&&t.removeChild(a),t.appendChild(i),this._load(i,n,r)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,n){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==n||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var n=this.media.play();return t&&this.setPlayEnd(t),n}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(n){n>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,t,n){return this.buffer?l(d(s.prototype),"getPeaks",this).call(this,e,t,n):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach((function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])})),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&u(t.prototype,n),r&&u(t,r),s}(i.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=l(n(15)),a=l(n(5)),s=l(n(6)),o=l(n(18)),u=l(n(19));function l(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,e);var t=d(n);function n(e){var o;if(m(this,n),(o=t.call(this)).defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:i.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[]},waveColor:"#999",xhr:{}},o.backends={MediaElement:s.default,WebAudio:a.default,MediaElementWebAudio:u.default},o.util=r,o.params=Object.assign({},o.defaultParams,e),o.container="string"==typeof e.container?document.querySelector(o.params.container):o.params.container,!o.container)throw new Error("Container element not found");if(null==o.params.mediaContainer?o.mediaContainer=o.container:"string"==typeof o.params.mediaContainer?o.mediaContainer=document.querySelector(o.params.mediaContainer):o.mediaContainer=o.params.mediaContainer,!o.mediaContainer)throw new Error("Media Container element not found");if(o.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(o.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===o.params.rtl&&r.style(o.container,{transform:"rotateY(180deg)"}),o.params.backgroundColor&&o.setBackgroundColor(o.params.backgroundColor),o.savedVolume=0,o.isMuted=!1,o.tmpEvents=[],o.currentRequest=null,o.arraybuffer=null,o.drawer=null,o.backend=null,o.peakCache=null,"function"!=typeof o.params.renderer)throw new Error("Renderer parameter is invalid");o.Drawer=o.params.renderer,"AudioElement"==o.params.backend&&(o.params.backend="MediaElement"),"WebAudio"!=o.params.backend&&"MediaElementWebAudio"!==o.params.backend||a.default.prototype.supportsWebAudio.call(null)||(o.params.backend="MediaElement"),o.Backend=o.backends[o.params.backend],o.initialisedPluginList={},o.isDestroyed=!1,o.isReady=!1;var l=0;return o._onResize=r.debounce((function(){l==o.drawer.wrapper.clientWidth||o.params.scrollParent||(l=o.drawer.wrapper.clientWidth,o.drawer.fireEvent("redraw"))}),"number"==typeof o.params.responsive?o.params.responsive:100),p(o,v(o))}return g(n,null,[{key:"create",value:function(e){return new n(e).init()}}]),g(n,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach((function(e){return t.addPlugin(e)})),e.forEach((function(e){e.deferInit||t.initPlugin(e.name)})),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach((function(n){t[n]=e.staticProps[n]}));var n=e.instance;return Object.getOwnPropertyNames(r.Observer.prototype).forEach((function(e){n.prototype[e]=r.Observer.prototype[e]})),this[e.name]=new n(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach((function(t){return e.destroyPlugin(t)}))}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())})),this.drawer.on("click",(function(t,n){setTimeout((function(){return e.seekTo(n)}),0)})),this.drawer.on("scroll",(function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)}))}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")})),this.backend.on("play",(function(){return e.fireEvent("play")})),this.backend.on("pause",(function(){return e.fireEvent("pause")})),this.backend.on("audioprocess",(function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)})),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",(function(){e.drawer.progress(e.backend.getPlayedPercents())})),this.backend.on("volume",(function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))})))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new o.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var n=this;return this.fireEvent("interaction",(function(){return n.play(e,t)})),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,n=this.getCurrentTime()||0;n=Math.max(0,Math.min(t,n+(e||0))),this.seekAndCenter(n/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return t.seekTo(e)}));var n=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),this.params.scrollParent=n,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,r.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),n=this.drawer.getWidth(),r=t,i=0,a=Math.max(i+n,r);if(this.params.fillParent&&(!this.params.scrollParent||t<n)&&(i=0,a=r=n),this.params.partialRender){var s,o=this.peakCache.addRangeToPeakCache(r,i,a);for(s=0;s<o.length;s++)e=this.backend.getPeaks(r,o[s][0],o[s][1]),this.drawer.drawPeaks(e,r,o[s][0],o[s][1])}else e=this.backend.getPeaks(r,i,a),this.drawer.drawPeaks(e,r,i,a);this.fireEvent("redraw",e,r)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,(function(e){t.isDestroyed||t.loadDecodedBuffer(e)}))}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,n=new FileReader;n.addEventListener("progress",(function(e){return t.onProgress(e)})),n.addEventListener("load",(function(e){return t.loadArrayBuffer(e.target.result)})),n.addEventListener("error",(function(){return t.fireEvent("error","Error reading file")})),n.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,n,r){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),n){var i={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(n),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},a=Object.keys(i).filter((function(e){return i[e]}));a.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+a.join("\n\t- ")),n=null)}switch(this.params.backend){case"WebAudio":return this.loadBuffer(e,t,r);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,n,r)}}},{key:"loadBuffer",value:function(e,t,n){var r=this,i=function(t){return t&&r.tmpEvents.push(r.once("ready",t)),r.getArrayBuffer(e,(function(e){return r.loadArrayBuffer(e)}))};if(!t)return i();this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(e,t,n,r){var i=this,a=e;if("string"==typeof e)this.backend.load(a,this.mediaContainer,t,n);else{var s=e;this.backend.loadElt(s,t),a=s.src}this.tmpEvents.push(this.backend.once("canplay",(function(){i.backend.destroyed||(i.drawBuffer(),i.isReady=!0,i.fireEvent("ready"))})),this.backend.once("error",(function(e){return i.fireEvent("error",e)}))),t&&(this.backend.setPeaks(t,r),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(a,(function(e){i.decodeArrayBuffer(e,(function(e){i.backend.buffer=e,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function(e,t){var n=this;this.arraybuffer=e,this.backend.decodeArrayBuffer(e,(function(r){n.isDestroyed||n.arraybuffer!=e||(t(r),n.arraybuffer=null)}),(function(){return n.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(e,t){var n=this,i=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),a=r.fetchFile(i);return this.currentRequest=a,this.tmpEvents.push(a.on("progress",(function(e){n.onProgress(e)})),a.on("success",(function(e){t(e),n.currentRequest=null})),a.on("error",(function(e){n.fireEvent("error",e),n.currentRequest=null}))),a}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,n,r,i){e=e||1024,r=r||0,t=t||1e4,n=n||!1;var a=this.backend.getPeaks(e,r,i),s=[].map.call(a,(function(e){return Math.round(e*t)/t}));return new Promise((function(e,t){var r=JSON.stringify(s);n||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(r)),e(r)}))}},{key:"exportImage",value:function(e,t,n){return e||(e="image/png"),t||(t=1),n||(n="dataURL"),this.drawer.getImage(e,t,n)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch((function(e){})),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach((function(e){return e.un()}))}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&this.backend.destroy(),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}]),n}(r.Observer);t.default=k,k.VERSION="4.2.0",k.util=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach((function(n){e[n]>t&&(t=e[n])})),t},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach((function(n){e[n]<t&&(t=e[n])})),t},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,i.default)((function(){return e.apply(void 0,n)}))}};var r,i=(r=n(4))&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t){function n(e,t,n){var r,i,a,s,o;function u(){var l=Date.now()-s;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(o=e.apply(a,i),a=i=null))}null==t&&(t=100);var l=function(){a=this,i=arguments,s=Date.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(o=e.apply(a,i),a=i=null),o};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(o=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},l}n.debounce=n,e.exports=n},function(e,t,n){"use strict";function r(e){e.stopPropagation(),document.body.removeEventListener("click",r,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){document.body.addEventListener("click",r,!0)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new i.default,n=new Headers,r=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach((function(e){n.append(e.key,e.value)}));var a=e.responseType||"json",o={method:e.method||"GET",headers:n,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(r,o).then((function(e){t.response=e;var n=!0;e.body||(n=!1);var r=e.headers.get("content-length");return null===r&&(n=!1),n?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new s(t,r,e)),o)):e})).then((function(e){var t;if(e.ok)switch(a){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+a}throw t||(t="HTTP error status: "+e.status),new Error(t)})).then((function(e){t.fireEvent("success",e)})).catch((function(e){t.fireEvent("error",e)})),t.fetchRequest=r,t};var r,i=(r=n(2))&&r.__esModule?r:{default:r};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.instance._reader=r.body.getReader(),this.total=parseInt(n,10),this.loaded=0}var t,n,r;return t=e,(n=[{key:"start",value:function(e){var t=this;!function n(){t.instance._reader.read().then((function(r){var i=r.done,a=r.value;if(i)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=a.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(a),n()})).catch((function(t){e.error(t)}))}()}}])&&a(t.prototype,n),r&&a(t,r),e}();e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return Math.min(Math.max(t,e),n)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(16)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),a=o(n(17));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,r,s=f(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=s.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,n.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),n.hasProgressCanvas=t.waveColor!=t.progressColor,n.halfPixel=.5/t.pixelRatio,n.canvases=[],n.progressWave=null,n.EntryClass=a.default,n.canvasContextAttributes=t.drawingContextAttributes,n.overlap=2*Math.ceil(t.pixelRatio/2),n.barRadius=t.barRadius||0,n}return t=o,(n=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"})),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),n=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<n;)this.addCanvas();for(;this.canvases.length>n;)this.removeCanvas();var r=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach((function(t,n){n==i&&(r=e.width-e.maxCanvasWidth*i),e.updateDimensions(t,r,e.height),t.clearWave()}))}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length;e.initWave(this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}))),this.hasProgressCanvas&&e.initProgress(this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}))),this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,n){var r=Math.round(t/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(r,i,t,n),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;i.frame((function(){e.canvases.forEach((function(e){return e.clearWave()}))}))()}},{key:"drawBars",value:function(e,t,n,r){var i=this;return this.prepareDraw(e,t,n,r,(function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks;if(void 0!==n)for(var l=a?2:1,c=u.length/l,f=i.params.barWidth*i.params.pixelRatio,h=f+(null===i.params.barGap?Math.max(i.params.pixelRatio,~~(f/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio)),d=c/i.width,p=r,v=n;v<p;v+=h){var y=u[Math.floor(v*d*l)]||0,m=Math.round(y/t*o);0==m&&i.params.barMinHeight&&(m=i.params.barMinHeight),i.fillRect(v+i.halfPixel,o-m+s,f+i.halfPixel,2*m,i.barRadius)}}))}},{key:"drawWave",value:function(e,t,n,r){var i=this;return this.prepareDraw(e,t,n,r,(function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks,l=e.channelIndex;if(!a){for(var c=[],f=u.length,h=0;h<f;h++)c[2*h]=u[h],c[2*h+1]=-u[h];u=c}void 0!==n&&i.drawLine(u,t,o,s,n,r,l),i.fillRect(0,o+s-i.halfPixel,i.width,i.halfPixel,i.barRadius)}))}},{key:"drawLine",value:function(e,t,n,r,i,a,s){var o=this,u=this.params.splitChannelsOptions.channelColors[s]||{},l=u.waveColor,c=u.progressColor;this.canvases.forEach((function(s,u){o.setFillStyles(s,l,c),s.drawLines(e,t,n,r,i,a)}))}},{key:"fillRect",value:function(e,t,n,r,i){for(var a=Math.floor(e/this.maxCanvasWidth),s=Math.min(Math.ceil((e+n)/this.maxCanvasWidth)+1,this.canvases.length),o=a;o<s;o++){var u=this.canvases[o],l=o*this.maxCanvasWidth,c={x1:Math.max(e,o*this.maxCanvasWidth),y1:t,x2:Math.min(e+n,o*this.maxCanvasWidth+u.wave.width),y2:t+r};c.x1<c.x2&&(this.setFillStyles(u),u.fillRects(c.x1-l,c.y1,c.x2-c.x1,c.y2-c.y1,i))}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,n,r,a,s){var o=this;return i.frame((function(){if(e[0]instanceof Array){var u=e;if(o.params.splitChannels){var l=u.filter((function(e,t){return!o.hideChannel(t)}));return o.params.splitChannelsOptions.overlay||o.setHeight(Math.max(l.length,1)*o.params.height*o.params.pixelRatio),u.forEach((function(e,t){return o.prepareDraw(e,t,n,r,a,l.indexOf(e))}))}e=u[0]}if(!o.hideChannel(t)){var c=1/o.params.barHeight;if(o.params.normalize){var f=i.max(e),h=i.min(e);c=-h>f?-h:f}var d=[].some.call(e,(function(e){return e<0})),p=o.params.height*o.params.pixelRatio;return a({absmax:c,hasMinVals:d,height:p,offsetY:p*s||0,halfH:p/2,peaks:e,channelIndex:t})}}))()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,n)}},{key:"getImage",value:function(e,t,n){if("blob"===n)return Promise.all(this.canvases.map((function(r){return r.getImage(e,t,n)})));if("dataURL"===n){var r=this.canvases.map((function(r){return r.getImage(e,t,n)}));return r.length>1?r:r[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}])&&l(t.prototype,n),r&&l(t,r),o}(r.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(0));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,i,a=u(l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this)).container=e,n.params=t,n.width=0,n.height=t.height*n.params.pixelRatio,n.lastPos=0,n.wrapper=null,n}return t=l,(n=[{key:"style",value:function(e,t){return r.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var n,i=e.targetTouches?e.targetTouches[0].clientX:e.clientX,a=this.wrapper.getBoundingClientRect(),s=this.width,o=this.getWidth();return n=!this.params.fillParent&&s<o?(this.params.rtl?a.right-i:i-a.left)*(this.params.pixelRatio/s)||0:((this.params.rtl?a.right-i:i-a.left)+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,r.clamp(n,0,1)}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",(function(t){var n=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==n){var r=e.wrapper.getBoundingClientRect();if(t.clientY>=r.bottom-n)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))})),this.wrapper.addEventListener("dblclick",(function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))})),this.wrapper.addEventListener("scroll",(function(t){return e.fireEvent("scroll",t)}))}},{key:"drawPeaks",value:function(e,t,n,r){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,n,r):this.drawWave(e,0,n,r)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var n=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=e-r,s=a-n;if(0!=i){if(!t&&-r<=s&&s<r){var o=this.params.autoCenterRate;o/=r,o*=i,a=n+(s=Math.max(-o,Math.min(o,s)))}(a=Math.max(0,Math.min(i,a)))!=n&&(this.wrapper.scrollLeft=a)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var n=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(n,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){return this.width!=e&&(this.width=e,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,n=Math.round(e*this.width)*t;if(n<this.lastPos||n-this.lastPos>=t){if(this.lastPos=n,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(r,this.params.autoCenterImmediately)}this.updateProgress(n)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,n,r){}},{key:"drawWave",value:function(e,t,n,r){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}])&&s(t.prototype,n),i&&s(t,i),l}(r.Observer);t.default=f,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,i.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var t,n,a;return t=e,(n=[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,n,i){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=n,this.wave.height=i;var a={width:e+"px"};(0,r.default)(this.wave,a),this.hasProgressCanvas&&(this.progress.width=n,this.progress.height=i,(0,r.default)(this.progress,a))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=e,this.hasProgressCanvas&&(this.progressCtx.fillStyle=t)}},{key:"fillRects",value:function(e,t,n,r,i){this.fillRectToContext(this.waveCtx,e,t,n,r,i),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,n,r,i)}},{key:"fillRectToContext",value:function(e,t,n,r,i,a){e&&(a?this.drawRoundedRect(e,t,n,r,i,a):e.fillRect(t,n,r,i))}},{key:"drawRoundedRect",value:function(e,t,n,r,i,a){0!==i&&(i<0&&(n-=i*=-1),e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,n,r,i,a){this.drawLineToContext(this.waveCtx,e,t,n,r,i,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,n,r,i,a)}},{key:"drawLineToContext",value:function(e,t,n,r,i,a,s){if(e){var o,u,l,c=t.length/2,f=Math.round(c*this.start),h=f,d=Math.round(c*this.end)+1,p=this.wave.width/(d-h-1),v=r+i,y=n/r;for(e.beginPath(),e.moveTo((h-f)*p,v),e.lineTo((h-f)*p,v-Math.round((t[2*h]||0)/y)),o=h;o<d;o++)u=t[2*o]||0,l=Math.round(u/y),e.lineTo((o-f)*p+this.halfPixel,v-l);for(var m=d-1;m>=h;m--)u=t[2*m+1]||0,l=Math.round(u/y),e.lineTo((m-f)*p+this.halfPixel,v-l);e.lineTo((h-f)*p,v-Math.round((t[2*h+1]||0)/y)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,n){var r=this;return"blob"===n?new Promise((function(n){r.wave.toBlob(n,e,t)})):"dataURL"===n?this.wave.toDataURL(e,t):void 0}}])&&s(t.prototype,n),a&&s(t,a),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,n,i;return t=e,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,n){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var r=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<t;)i++;for(i%2==0&&r.push(t);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=n;)r.push(this.peakCacheRanges[i]),i++;i%2==0&&r.push(n),r=r.filter((function(e,t,n){return 0==t?e!=n[t+1]:t==n.length-1?e!=n[t-1]:e!=n[t-1]&&e!=n[t+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(r),this.peakCacheRanges=this.peakCacheRanges.sort((function(e,t){return e-t})).filter((function(e,t,n){return 0==t?e!=n[t+1]:t==n.length-1?e!=n[t-1]:e!=n[t-1]&&e!=n[t+1]}));var a=[];for(i=0;i<r.length;i+=2)a.push([r[i],r[i+1]]);return a}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,r,i=u(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).params=e,t.sourceMediaElement=null,t}return t=l,(n=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,t,n){s(c(l.prototype),"_load",this).call(this,e,t,n),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,t){return this.resumeAudioContext(),s(c(l.prototype),"play",this).call(this,e,t)}},{key:"destroy",value:function(){s(c(l.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&a(t.prototype,n),r&&a(t,r),l}(((r=n(6))&&r.__esModule?r:{default:r}).default);t.default=f,e.exports=t.default}])}));
    //# sourceMappingURL=wavesurfer.min.js.map
        </script>
        <style>
        :root{--color-white:#fff;--color-blue:#2a60c8;--color-yellow:#faebd7;--color-grey-dark:#77828f;--color-grey-primary:#f4f4f4;--color-grey-secondary:#dce1e6;--color-grey-border:#ddddde;--color-grey-text:#b8b8b8;--full-width:100%;--half-width:50%;--div-width-primary:200px;--div-width-secondary:150px;--div-width-tertiary:100px;--div-height-primary:200px;--border-width-primary:1px;--border-width-secondary:4px;--no-padding:0;--padding-primary:10px;--padding-secondary:20px;--padding-tertiary:30px;--calc-height-dhp2bws:calc(var(--div-height-primary) * 2 - var(--border-width-secondary));--calc-width-fwdwpdws:calc(calc(var(--full-width) - var(--div-width-primary)) - var(--div-width-secondary))}*{-ms-flex:0 1 auto;flex:0 1 auto;padding:0;box-sizing:border-box}i{font-style:normal}body,html{height:100%;font-family:sans-serif;margin:0}.start-align-custom{justify-content:flex-start;height:calc(100% - var(--div-height-primary))}.end-align-custom{justify-content:flex-end;height:var(--div-height-primary)}.person-card-custom,.person-icon-custom{display:inline-block}.messages-message-custom{width:100%;float:left}.person-img-icon-custom{bottom:0}.person-img-right-custom{float:right;width:40px;height:40px;padding:10px 5px 0 5px;background-color:var(--color-blue);margin:10px;border-radius:50%}.box-messages-right-custom{min-width:100px;margin:15px 10px 15px auto;text-align:right;font-weight:500;font-size:15px;color:var(--color-grey-text);font-family:arial;position:relative;float:right}.box-right{width:100%;background:var(--color-grey-border);color:#000;text-align:center;padding:15px;font-weight:400;font-size:15px;border-radius:10px;font-family:arial;position:relative}.person-img-left-custom{float:left;width:40px;height:40px;padding:10px 5px 0 5px;background-color:var(--color-blue);margin:10px;border-radius:50%}.box-messages-left-custom{min-width:100px;margin:15px auto 15px 10px;text-align:left;font-weight:500;font-size:15px;color:var(--color-grey-text);font-family:arial;position:relative;float:left}.box-left{width:100%;background:var(--color-yellow);text-align:center;padding:15px;font-weight:400;font-size:15px;color:#000;border-radius:10px;font-family:arial;position:relative}.sb1-custom:before{content:"";width:0;height:0;position:absolute;border-left:10px solid var(--color-grey-border);border-right:10px solid transparent;border-top:10px solid var(--color-grey-border);border-bottom:10px solid transparent;right:-12px;top:0}.sb2-custom:before{content:"";width:0;height:0;position:absolute;border-left:10px solid transparent;border-right:10px solid var(--color-yellow);border-top:10px solid var(--color-yellow);border-bottom:10px solid transparent;left:-12px;top:0}.person-icon-custom{height:15px;text-align:center;width:15px;position:relative;background:var(--color-blue);border-radius:50%}.header-header-custom{font-weight:700}.profile-custom.icon-custom{height:5px;width:10px;bottom:0;left:2px;color:var(--color-white)}.profile-custom.icon-custom:before{content:"";width:6px;height:6px;bottom:6px;left:2px}.profile-custom.icon-custom,.profile-custom.icon-custom:before{position:absolute;background-color:var(--color-white);border-radius:100%}.chat-cell-custom.time-custom,.email-label-custom,.participant-heading-custom{font-weight:700;color:var(--color-grey-dark)}.email-body-custom,.email-from-custom,.email-label-custom{font-size:14px}.conversation-participant-container-custom{border:var(--border-width-secondary) solid var(--color-white);width:var(--div-width-primary);background-color:var(--color-grey-primary)}.conversation-participant-container-custom{display:flex;flex-direction:column}.chat-transcript-view-custom{width:var(--full-width);float:left;margin:0}.chat-message-row-custom,.chat-transcript-view-custom,.form-group-custom{border:var(--border-width-primary) solid var(--color-grey-border)}.chat-message-row-custom{border-left:0;border-right:0}.chat-message-row-custom,.details-row-custom,.head-form-group-custom,.panel-heading-custom{display:flex;float:left;width:100%}.head-form-group-custom{width:100%;padding:10px;height:80px;background-color:#f6f6f6}.head-form-group-custom>div{padding:0 20px}.head-form-group-custom>div:nth-child(1){text-align:left;width:40%}.head-form-group-custom>div:nth-child(2){text-align:center;width:20%}.head-form-group-custom>div:nth-child(3){text-align:right;width:40%}.details-row-custom{flex-direction:row}#externalParticipanName,#internalParticipanName,.details-header-custom,.details-value-custom{font-size:14px;padding:0}#BodyEmail{font-size:14px}.body-custom,.playback-center-custom,.recording-views-container-custom{float:left;width:100%;display:flex;flex-direction:row}.details-header-custom{font-weight:700}.body-messages-custom-chat{float:left;width:calc(var(--full-width) - var(--div-width-primary));min-height:395px}.panel-heading-custom{background:linear-gradient(180deg,var(--color-white) 0,var(--color-grey-secondary) 100%);flex-direction:column;justify-content:center}.panel-heading-custom{height:30px;padding:auto 10px}.comunication-type-custom{float:left;width:100%;height:50px;padding:13px 10px;font-size:20px}.chat-details-container-custom{float:left;min-height:250px}.chat-cell-custom.message-custom,.chat-cell-custom.name-custom,.chat-cell-custom.time-custom,.conversation-participant-container-custom,.details-row-custom{padding:var(--padding-primary)}.conversation-metrics-header-custom{padding:var(--no-padding)}.conversation-participant-container-custom{padding:var(--padding-tertiary) var(--padding-primary)}.chat-cell-custom.name-custom,.chat-cell-custom.time-custom{text-align:right}.body-messages-custom,.chat-cell-custom.message-custom,.chat-cell-custom.name-custom{float:left}.chat-cell-custom.message-custom{word-wrap:break-word;width:var(--calc-width-fwdwpdws);border-left:var(--border-width-primary) solid var(--color-grey-border)}.chat-cell-custom.name-custom{width:var(--div-width-primary)}.chat-cell-custom.time-custom{float:right;width:var(--div-width-secondary)}.panel-body-custom.details-tab-content-custom{width:var(--full-width);display:flex}.email-body-custom{width:var(--full-width);display:inline-flex}.conversation-details-container-custom{width:var(--half-width)}.details-header-custom{width:var(--div-width-primary)}.details-value-custom{width:calc(var(--full-width) - var(--div-width-secondary))}.details-header-custom,.details-value-custom{padding:5px}.conversation-metrics-header-custom{border-bottom:var(--border-width-primary) solid var(--color-grey-border)}.tab-panels-custom{padding:var(--border-width-secondary);float:left;width:100%}.form-group-custom{width:var(--half-width);padding:var(--padding-secondary);border-bottom:0}.button-detail-custom{padding:var(--padding-primary);width:var(--div-width-tertiary);border-top:2px solid var(--color-blue);border-left:1px solid var(--color-grey-border);border-right:1px solid var(--color-grey-border);border-bottom:0;outline:0}.dropdown{position:relative;display:inline-block}.dropdown-content{display:none;position:absolute;background-color:#f9f9f9;min-width:200px;box-shadow:0 8px 16px 0 rgba(0,0,0,.2);padding:0;z-index:1}.dropdown:hover .dropdown-content{display:block}.message-body{max-width:70%;display:flex;flex-direction:column}.message-attachment img{width:100%}.lds-roller{display:inline-block;position:absolute;width:80px;height:80px;top:calc(50% - 40px);left:calc(50% - 40px);z-index:10}.lds-roller div{animation:lds-roller 1.2s cubic-bezier(0.5,0,0.5,1) infinite;transform-origin:40px 40px}.lds-roller div:after{content:" ";display:block;position:absolute;width:9px;height:9px;border-radius:50%;background:var(--color-blue);margin:-4px 0 0 -4px}.lds-roller div:nth-child(1){animation-delay:-0.036s}.lds-roller div:nth-child(1):after{top:63px;left:63px}.lds-roller div:nth-child(2){animation-delay:-0.072s}.lds-roller div:nth-child(2):after{top:68px;left:56px}.lds-roller div:nth-child(3){animation-delay:-0.108s}.lds-roller div:nth-child(3):after{top:71px;left:48px}.lds-roller div:nth-child(4){animation-delay:-0.144s}.lds-roller div:nth-child(4):after{top:72px;left:40px}.lds-roller div:nth-child(5){animation-delay:-0.18s}.lds-roller div:nth-child(5):after{top:71px;left:32px}.lds-roller div:nth-child(6){animation-delay:-0.216s}.lds-roller div:nth-child(6):after{top:68px;left:24px}.lds-roller div:nth-child(7){animation-delay:-0.252s}.lds-roller div:nth-child(7):after{top:63px;left:17px}.lds-roller div:nth-child(8){animation-delay:-0.288s}.lds-roller div:nth-child(8):after{top:56px;left:12px}@keyframes lds-roller{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
        </style>
        
    </head>

    <body onload="init()">
        <script >
            
            var interactionId, purePath, substring, fullPef = false, environment = undefined,
                currentInteraction = undefined, unit, y, redirectUri, platformClient;
            var pureCloudToken;
            var usersApi;
            var analyticsApi;
            var recordingsApi;
            var conversationsApi;
            var error_403 = false;
            var error_404 = false;

            var bretry = false;
            var attempt = 0;

            var LoggerIxn = /** @class */ (function () {
                function LoggerIxn() { }
                LoggerIxn.prototype.info = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    var originalLog = console.info;
                    originalLog.apply(console.info, [this.getCurrentDate()].concat(args));
                };
                LoggerIxn.prototype.getCurrentDate = function () { return "[" + new Date().toISOString() + "] pureClientIXN *** "; };
                return LoggerIxn;
            }());
            var loggerIxn = new LoggerIxn();

            function customParseURL(skey, sdefault) {
                if (!window.customUrlParams) {
                    window.customUrlParams = [];
                    var hash;
                    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                    for (var i = 0; i < hashes.length; i++) {
                        hash = hashes[i].split('=');
                        window.customUrlParams.push(hash[0]);
                        window.customUrlParams[hash[0]] = hash[1];
                    }
                }
                var retval = window.customUrlParams[skey];
                return (retval ? retval : sdefault);
            }


            function onClick() {
                let details = document.getElementById("details");
                if (details.style.display != 'none') details.style.display = 'none';
                else details.style.display = 'flex';
            }

            function init() {
                pureCloudToken = localStorage.getItem("pureCloudToken");
                if (!pureCloudToken) {
                    printError("You are not authorized, login with your embeddable widget and retry.");
                    return;
                }
                interactionId = customParseURL('id', null);
                if ( interactionId.indexOf("-") < 0 ){
                    console.log("interactionid is not in uuid format, adding dashes");
                    interactionId = interactionId.toLowerCase();
                    interactionId = interactionId.slice(0, 20) + "-" + interactionId.slice(20);
                    interactionId = interactionId.slice(0, 16) + "-" + interactionId.slice(16);
                    interactionId = interactionId.slice(0, 12) + "-" + interactionId.slice(12);
                    interactionId = interactionId.slice(0, 8) + "-" + interactionId.slice(8);
                    console.log("interactionid : " ,interactionId )
                }
                environment = customParseURL('env', null);
                if ( !environment ){
                    environment = customParseURL('pcEnv', "mypurecloud.com");
                }
                purePath = customParseURL('purePath', null);
                redirectUri = window.location.origin + window.location.pathname;

                if (!interactionId) {
                    printError("The interaction id is mandatory");
                    return;
                }

                var head = document.getElementsByTagName('head')[0];
                var pureScript = document.createElement('script');
                pureScript.type = 'text/javascript';

                if (!purePath) {
                    console.log("missing pure path, using cdn version");
                    purePath = "https://sdk-cdn.mypurecloud.com/javascript/77.0.0/purecloud-platform-client-v2.min.js";
                    fullPef = true;
                }
                pureScript.src = purePath;
                head.appendChild(pureScript);
                pureScript.onload = function () { loadPure(); }
            }

            function loadPure() {
                platformClient = require('platformClient');
                usersApi = new platformClient.UsersApi();
                analyticsApi = new platformClient.AnalyticsApi();
                recordingsApi = new platformClient.RecordingApi();
                conversationsApi = new platformClient.ConversationsApi();
                platformClient.ApiClient.instance.setEnvironment(environment);
                if (!pureCloudToken) {
                    printError("Cannot authorize, login with your embeddable widget and retry");
                    return;
                }

                platformClient.ApiClient.instance.setAccessToken(pureCloudToken);
                checkTokenAndLoadPromises();
            }

            function checkTokenAndLoadPromises() {
                usersApi.getUsersMe()
                    .then(function (userMe) {
                        startPromises();
                    }).catch(function (error) {                                        
                        manageError(error);                     
                        document.getElementById("playback-container").style.display = "none";
                        document.getElementById("loader").style.display = "none";
                    });
            }

            function startPromises() {
                getInteractionDetail();
                getConversation();
                getInteractionInfo();
            }

            function getConversation() {
                var conversationId = interactionId;
                conversationsApi.getConversation(conversationId).then(function (result) {
                    console.log('GetConversation: ',result)
                    var numParticipantInternal = 0;
                    var int_count = 0;
                    var ext_count = 0;
                    var type_count = 0;
                    let int_array = [];

                    /*if(result.participants && 
                        result.participants[0] &&
                        result.participants[0].chats &&
                        result.participants[0].chats[0] &&
                        (
                            result.participants[0].chats[0].state == 'connected'
                        )
                    ){
                        document.querySelectorAll(".head-form-group-custom")[0].style.display = "";
                        document.getElementById("chatTranscriptContainer").style.display = "block";
                        document.getElementById("playback-container").style.display = "block";
                        printError('This interaction is currently in progress.')
                        let transcript = document.getElementById("chatTranscriptContainer")
                        transcript.innerHTML = '';                    
                        transcript.appendChild(document.getElementById('errorContainer'));
                        document.getElementById('iconError').style.textAlign = 'left';
                    }*/

                    for (var index = 0; index < result.participants.length; index++) {
                        var participant = result.participants[index];

                        if(!type_count && participant.calls && participant.calls[type_count] && participant.calls[type_count].direction){                            
                            document.getElementById("directionValue").innerHTML = document.getElementById("directionValue").innerHTML = participant.calls[type_count].direction.charAt(0).toUpperCase() + participant.calls[type_count].direction.slice(1);
                            document.getElementById("direction").style.display = "";                            
                            type_count++;
                        }

                        if (participant.purpose == "customer" || participant.purpose == "external") {
                            document.getElementById("externalParticipanName").innerText = participant.name?participant.name:'Guest';
                            if (!ext_count) {
                                let participantName = participant.name?participant.name:'Guest';
                                document.getElementById("externalParticipantValue").appendChild(document.createTextNode(participantName + " "));
                                ext_count++;
                            }
                        }

                        if (participant.purpose == "agent" || participant.purpose == "user") {
                            numParticipantInternal++;
                            int_array.push(participant.name?participant.name:'Guest');
                            if (!int_count) {
                                document.getElementById("internalParticipantValue").innerText = participant.name;
                                document.getElementById("queueValue").innerText = participant.queueName;
                                int_count++;
                            }
                        }

                        if (participant.wrapupRequired) {
                            document.getElementById("wrapUpName").innerHTML = "" + participant.name
                            if (participant.wrapup && participant.wrapup.name != undefined) {
                                document.getElementById("wrapUpCode").innerHTML = "" + participant.wrapup.name
                            } else {
                                document.getElementById("wrapUpCode").innerHTML = " - ";
                            }
                            console.log('participant.wrapup', participant.wrapup)
                            if (participant.wrapup && participant.wrapup.notes != undefined) {
                                if(document.getElementById("wrapUpNotes").innerHTML.includes(' - ')){
                                    document.getElementById("wrapUpNotes").innerHTML.replace(' - ','')
                                }
                                document.getElementById("wrapUpNotes").innerHTML += "" + participant.wrapup.notes + ' ';
                            } else if(!document.getElementById("wrapUpNotes").innerHTML.length){
                                document.getElementById("wrapUpNotes").innerHTML += " - "
                            }
                        }
                    }

                    if (numParticipantInternal == 0) {
                        var tmp_html = '<span id="iconInternalParticipant" class="person-icon-custom">'+
                            '<i class="profile-custom icon-custom"></i>'+
                            '</span>'+
                            '<span id="internalParticipanName" data-bind="text: nameDisplayString" style="margin-left:5px;">No Participants</span>';
                        document.getElementById("participantBody").innerHTML = tmp_html;
                    }

                    if(numParticipantInternal == 1) {
                        var tmp_html = '<span id="iconInternalParticipant" class="person-icon-custom">'+
                            '<i class="profile-custom icon-custom"></i>'+
                            '</span>'+
                            '<span id="internalParticipanName" data-bind="text: nameDisplayString" style="margin-left:5px;">'+int_array[0]+'</span>';
                        document.getElementById("participantBody").innerHTML = tmp_html;                        
                    }

                    if (numParticipantInternal > 1) {//multipleCall
                        let div = document.createElement('div');
                        div.classList.add("dropdown")
                        let span_1 = document.createElement('span');
                        span_1.id = "iconInternalParticipant";
                        span_1.style.margin = " 0 5px 0 0"
                        span_1.classList.add("person-icon-custom");
                        let icon_1 = document.createElement('i');
                        icon_1.id = "iconInternalParticipant";
                        icon_1.classList.add("profile-custom","icon-custom");
                        span_1.appendChild(icon_1);
                        div.appendChild(span_1);  
                        let span = document.createElement('span');
                        span.innerHTML = 'Multiple';
                        span.style.color = 'var(--color-blue)';
                        div.appendChild(span);                    
                        let div_dropdown = document.createElement('div');
                        div_dropdown.classList.add("dropdown-content");
                        div.appendChild(div_dropdown);
                        int_array.forEach((x) => {
                            let div2 = document.createElement('div');
                            div2.classList.add("person-card-custom");
                            div2.style.padding = "10px 10px";
                            div2.style.width = "100%";
                            div2.style.borderBottom = "2px solid var(--color-grey-secondary)";
                            let span_icon = document.createElement('span');
                            span_icon.id = "iconInternalParticipant";
                            span_icon.classList.add("person-icon-custom");
                            span_icon.style.margin = " 0 5px 0 0"
                            let icon = document.createElement('i');
                            icon.id = "iconInternalParticipant";
                            icon.classList.add("profile-custom","icon-custom");
                            span_icon.appendChild(icon);
                            div2.appendChild(span_icon);
                            let span_name = document.createElement('span');
                            span_name.id = "internalParticipanName";
                            span_name.innerHTML = x;
                            div2.appendChild(span_name)  
                            div_dropdown.appendChild(div2);
                        })
                        
                        document.getElementById("participantBody").innerHTML = ""; 
                        document.getElementById("participantBody").append(div); 
                    }
                    if(!error_403)document.querySelector(".body-custom").style.display = "";
                }).catch(function (error) {
                    console.log("getConversation")
                    manageError(error, conversationId);
                    document.querySelector(".body-custom").style.display = "none";
                });

            }

            function manageError(error, interactionId) {
                var msg;

                switch (error.status) {
                    case 401:
                        printError("Authorization error");
                        break;
                    case 403:
                        printError("You are not authorized for this interaction : " + interactionId);
                        break;
                    case 404:
                        printError("Interaction not found : " + interactionId);
                        break;
                    default:
                        printError("Error retrieving detail for this interaction : " + interactionId);
                        break;
                }
            }

            function onlyUnique(value, index, self) {
                return self.indexOf(value) === index;
            }

            function getInteractionDetail() {
                var conversationId = interactionId;

                analyticsApi.getAnalyticsConversationDetails(conversationId).then(function (result) {
                    console.log('GetInteractionDetail: ',result)
                    var dateStart = result.conversationStart;
                    var dateEnd = result.conversationEnd;
                    var startTimeString = getDateFormatted(dateStart);
                    var isMessage = result && result.participants && result.participants[0] && result.participants[0].sessions 
                    && result.participants[0].sessions[0] &&  result.participants[0].sessions[0] && 
                    ( result.participants[0].sessions[0].mediaType == 'message' || result.participants[0].sessions[0].mediaType == 'callback') ;
                    if(!dateEnd && !isMessage){
                        error_404 = true;
                        document.querySelectorAll(".head-form-group-custom")[0].style.display = "";
                        document.getElementById("chatTranscriptContainer").style.display = "block";
                        document.getElementById("playback-container").style.display = "block";
                        printError('This interaction is currently in progress.')
                        let transcript = document.getElementById("chatTranscriptContainer")
                        transcript.innerHTML = '';                    
                        transcript.appendChild(document.getElementById('errorContainer'));
                        document.getElementById('errorContainer').style.position = '';
                    }
                    var endTimeString = dateEnd?getDateFormatted(dateEnd):"-";
                    var duration = new Date(dateEnd).getTime() - new Date(dateStart).getTime();
                    var durationTimeString = duration?((new Date(duration).getUTCHours()?((new Date(duration).getUTCHours() < 10 ? '0' : '')+ new Date(duration).getUTCHours() +":"):'') + (new Date(duration).getMinutes() < 10 ? '0' : '') + new Date(duration).getMinutes() + ":" + (new Date(duration).getSeconds() < 10 ? '0' : '') + new Date(duration).getSeconds()):'-';
                    document.getElementById("InteractionIdValue").innerHTML = conversationId;
                    document.getElementById("startTimeValue").innerHTML = document.getElementById("startTimeHeader").innerHTML = startTimeString;
                    document.getElementById("endTimeValue").innerHTML = document.getElementById("endTimeHeader").innerHTML = endTimeString;
                    document.getElementById("durationTimeValue").innerHTML = document.getElementById("durationTimeHeader").innerHTML = durationTimeString;
                    if(result.participants && result.participants.length){
                        let unique = [];
                        for(let index=0;index<result.participants.length;index++){
                            if(result.participants[index] &&
                                result.participants[index].sessions &&
                                result.participants[index].sessions[0]
                            ){
                                unique.push(
                                    ...result.participants[index].sessions
                                    .map(x=>{
                                        if(x.mediaType)return x.mediaType;
                                    })
                                )                            
                            }else continue;
                        }
                        unique = unique.filter(onlyUnique)
                            .map(x=>{
                                if(x=='voice')return 'Call';
                                else return x.charAt(0).toUpperCase() + x.slice(1);
                            });
                        if(unique[0]=='Callback')unique.reverse();
                        unique = unique.join(' ');
                        appendTypeOfComunication(unique)
                        document.getElementById("interactionType").innerHTML = unique;
                        for(let index=0;index<result.participants.length;index++){
                            if(result.participants[index] &&
                                result.participants[index].sessions &&
                                result.participants[index].sessions.length
                            ){
                                if(result.participants[index].sessions[0].messageType){
                                    let messageType = result.participants[0].sessions[0].messageType;
                                    document.getElementById("MessageTypeValue").innerHTML = messageType.charAt(0).toUpperCase() + messageType.slice(1);
                                    document.getElementById("MessageType").style.display = "";
                                    break;
                                }

                            }
                        }
                    }                
                
                    if(!error_403)document.querySelector(".tab-panels-custom").style.display = "";
                }).catch(function (error) {
                    document.querySelector(".tab-panels-custom").style.display = "none";               
                });
            }

            function appendTypeOfComunication(data){
                let icon = '';
                if(data.includes('Chat'))icon = chatSvg();
                else if(data.includes('Call'))icon = callSvg();
                else if(data.includes('Email'))icon = emailSvg();
                else if(data.includes('Message'))icon = messagedSvg()
                document.getElementById("typeOfComunication").innerHTML = icon+"<span style='margin-left:5px; vertical-align:top;'>" + data + "</span>";
            }

            function getParticipantAliasName(strFrom) {
                if(strFrom == "")return "Workflow"
                else if(strFrom && strFrom.indexOf("@guest") >= 0 )return "Guest"
                else if(strFrom && strFrom.indexOf("@") >= 0 ) return "Agent";
                else if (strFrom) return strFrom;
                else return "Agent";
            }

            function getDateFormatted(date){
                return getDate(date) + " " + getTime(date);
            }

            function getDate(date){
                return new Date(date).toLocaleDateString();
            }

            function getTime(date){
                return new Date(date).toLocaleTimeString()
            }

            function messagedSvg(){
                return '<svg width="23" height="23" fill="grey" viewBox="0 0 32 32" id="icon-comment-ellipsis"><path d="M2.2,9.5v8A5.93,5.93,0,0,0,8.11,23.4h7.47a.82.82,0,0,1,.62.28,56,56,0,0,0,4.71,4.52,1,1,0,0,0,1.59-.68c.12-1.41-.28-4,.89-4.09l.5,0A5.93,5.93,0,0,0,29.8,17.5v-8a5.93,5.93,0,0,0-5.9-5.92H8.11A5.93,5.93,0,0,0,2.2,9.5ZM20,13.5a1.74,1.74,0,1,1,1.74,1.74A1.74,1.74,0,0,1,20,13.5Zm-5.75,0A1.74,1.74,0,1,1,16,15.23,1.74,1.74,0,0,1,14.26,13.5Zm-5.75,0a1.74,1.74,0,1,1,1.74,1.74A1.74,1.74,0,0,1,8.52,13.5Z"></path></svg>'
            }
            
            function emailSvg(){
                return '<svg width="23" height="23" fill="grey" viewBox="0 0 32 32" id="icon-envelope"><path d="M25.22,5H6.62c-2.37,0-4.3.5-4.41,2.87a.72.72,0,0,0,.44.66l11.59,5.9a3.69,3.69,0,0,0,1.71.39,4,4,0,0,0,1.6-.39L29.24,8.8A1,1,0,0,0,29.79,8V7.75C29.79,5.32,27.64,5,25.22,5Z"></path><path d="M3.26,12.44a.7.7,0,0,0-.66,0c-.44.22-.39.55-.39.88v10.1A3.58,3.58,0,0,0,5.79,27h20.8a3.2,3.2,0,0,0,3.2-3.2V13.1a.71.71,0,0,0-.5-.72,1.51,1.51,0,0,0-.88.11L17.44,18a3.39,3.39,0,0,1-3.09,0L3.26,12.44Z"></path></svg>'
            }

            function chatSvg(){
                return '<svg width="23" height="23" fill="grey" viewBox="0 0 32 32" id="icon-chat"><path d="M16,3.13C8.41,3.13,2.23,8.26,2.23,14.66a10.21,10.21,0,0,0,2.48,6.57.68.68,0,0,1,.11.55l-2,6.29a.61.61,0,0,0,.88.72L9.9,25.2a.54.54,0,0,1,.5-.06,16.64,16.64,0,0,0,5.57,1c7.61,0,13.79-5.13,13.79-11.53S23.64,3.13,16,3.13Z"></path></svg>'
            }

            function callSvg(){
                return '<svg width="23" height="23" fill="grey" viewBox="0 0 32 32" id="icon-phone"><path d="M13,12.77,15.4,10.4a3.22,3.22,0,0,0,.06-3.53L13.75,3.5a2.15,2.15,0,0,0-3.37-.77A11.57,11.57,0,0,0,6.63,8.36a6,6,0,0,0,.44,4.47l2,4L11.76,22l2.1,4.08a6,6,0,0,0,3.26,3,11.51,11.51,0,0,0,7,.28,2.11,2.11,0,0,0,1.32-3c-.66-1.32-1.32-2.59-2-3.92a3,3,0,0,0-2.65-1.6l-3.64.06Z"></path></svg>'
            }

            function peopleSvg(){
                return '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-42 0 512 512.002" fill="white"><path d="m210.351562 246.632812c33.882813 0 63.222657-12.152343 87.195313-36.128906 23.972656-23.972656 36.125-53.304687 36.125-87.191406 0-33.875-12.152344-63.210938-36.128906-87.191406-23.976563-23.96875-53.3125-36.121094-87.191407-36.121094-33.886718 0-63.21875 12.152344-87.191406 36.125s-36.128906 53.308594-36.128906 87.1875c0 33.886719 12.15625 63.222656 36.132812 87.195312 23.976563 23.96875 53.3125 36.125 87.1875 36.125zm0 0"/><path d="m426.128906 393.703125c-.691406-9.976563-2.089844-20.859375-4.148437-32.351563-2.078125-11.578124-4.753907-22.523437-7.957031-32.527343-3.308594-10.339844-7.808594-20.550781-13.371094-30.335938-5.773438-10.15625-12.554688-19-20.164063-26.277343-7.957031-7.613282-17.699219-13.734376-28.964843-18.199219-11.226563-4.441407-23.667969-6.691407-36.976563-6.691407-5.226563 0-10.28125 2.144532-20.042969 8.5-6.007812 3.917969-13.035156 8.449219-20.878906 13.460938-6.707031 4.273438-15.792969 8.277344-27.015625 11.902344-10.949219 3.542968-22.066406 5.339844-33.039063 5.339844-10.972656 0-22.085937-1.796876-33.046874-5.339844-11.210938-3.621094-20.296876-7.625-26.996094-11.898438-7.769532-4.964844-14.800782-9.496094-20.898438-13.46875-9.75-6.355468-14.808594-8.5-20.035156-8.5-13.3125 0-25.75 2.253906-36.972656 6.699219-11.257813 4.457031-21.003906 10.578125-28.96875 18.199219-7.605469 7.28125-14.390625 16.121094-20.15625 26.273437-5.558594 9.785157-10.058594 19.992188-13.371094 30.339844-3.199219 10.003906-5.875 20.945313-7.953125 32.523437-2.058594 11.476563-3.457031 22.363282-4.148437 32.363282-.679688 9.796875-1.023438 19.964844-1.023438 30.234375 0 26.726562 8.496094 48.363281 25.25 64.320312 16.546875 15.746094 38.441406 23.734375 65.066406 23.734375h246.53125c26.625 0 48.511719-7.984375 65.0625-23.734375 16.757813-15.945312 25.253906-37.585937 25.253906-64.324219-.003906-10.316406-.351562-20.492187-1.035156-30.242187zm0 0"/></svg>'
            }

            function getInteractionInfo() {
                var conversationId = interactionId;

                var opts = {
                    'maxWaitMs': 10000,
                    'formatId': "MP3"
                };
                recordingsApi.getConversationRecordings(conversationId, opts).then(function (result) {
                    console.log("getConversationRecordings : ",result);
                    if ((!bretry) && ((!result) || (result.length < 1))) {
                        attempt++;
                        if (attempt < 5) {
                            setTimeout(getInteractionInfo, 1000);
                        }
                        return;
                    }

                    for (var index = 0; index < result.length; index++) {
                        currentInteraction = result[index];
                        if (currentInteraction == undefined) {
                            document.getElementById("Error").innerHTML = "<span style='color:red;font-size:4em;top:150px;position:relative;'>" + "Email transcript not found" + "</span>";
                            document.getElementById("Error").style.display = "block";
                            document.getElementById("loader").style.display = "none";
                            return;
                        } else {                        
                            var mediaType = currentInteraction.media;
                            document.getElementById("loader").style.display = "none";
                            console.log("mediaType", mediaType)
                            switch (mediaType) {
                                case "chat":
                                    var chatTranscript = currentInteraction.transcript;
                                    
                                    document.querySelectorAll(".head-form-group-custom")[0].style.display = "";
                                    var html = "";
                                    if (chatTranscript !== undefined) {
                                        document.getElementById("titleTranscript").innerHTML = "Chat Log";
                                        document.getElementById("titleTranscript").style.display = "";
                                        for (var i = 0; i < chatTranscript.length; i++) {
                                            if (chatTranscript[i].body) {
                                                html += "<div class='chat-message-row-custom'>";

                                                html += "<div class='chat-cell-custom name-custom'>" + getParticipantAliasName(chatTranscript[i].from) + "</div>";
                                                html += "<div class='chat-cell-custom message-custom'>" + chatTranscript[i].body + "</div>"
                                                var startTimeString = getTime(chatTranscript[i].utc);
                                                html += "<div class='chat-cell-custom time-custom'>" + startTimeString + "</div>";
                                                html += "</div>";
                                            }

                                        }
                                        document.getElementById("chatTranscriptContainer").innerHTML = html;                                    
                                        document.querySelectorAll(".chat-transcript-view-custom")[0].style.minHeight = "235px";
                                        document.getElementById("chatTranscriptContainer").style.display = "block";
                                        document.getElementById("playback-container").style.display = "block";
                                        document.getElementById("loader").style.display = "none";
                                    }else {
                                        var htmlError = "";
                                        htmlError += '<div class="empty-interaction-indicator" style="text-align:center"><div class="empty-interaction-icon"><i class="fas fa-times"></i><div>'
                                        htmlError += '<div><h3">Empty Chat Recording</h3><span>There are no messages in this chat.</span></div></div>'
                                        document.getElementById("chatTranscriptContainer").innerHTML = htmlError;                                    
                                        document.querySelectorAll(".chat-transcript-view-custom")[0].style.minHeight = "235px";
                                        document.getElementById("chatTranscriptContainer").style.display = "block";
                                        document.getElementById("playback-container").style.display = "block";
                                        document.getElementById("loader").style.display = "none";
                                    }
                                    break;
                                case "audio":
                                    //audio(mediaType, currentInteraction, conversationId, index, opts);
                                    buildWaves(currentInteraction);
                                    break;
                                case "email":
                                    var emailTranscript = currentInteraction.emailTranscript[0];
                                    document.querySelectorAll(".chat-transcript-view-custom")[0].style.minHeight = "346px";
                                    if (emailTranscript !== undefined) {
                                        if(index==0)document.getElementById("chatTranscriptContainer").innerHTML="";  
                                        var centerContainer =  document.getElementById("chatTranscriptContainer");                               
                                        document.getElementById("chatTranscriptContainer").style.display = "";
                                        var lastChild = centerContainer.lastElementChild;
                                        var containerTemp = document.createElement("div");
                                        var attachments = "";
                                        if (emailTranscript.attachments) {
                                            emailTranscript.attachments.forEach(function (a)  {
                                                attachments += '<a class="email-attachment" style="margin-right:10px" data-bind="text: name,attr: {href: contentPath ,download: name}" href=' + a.contentPath + ' download=' + a.name + ' >' + a.name + '</a>';
                                            })
                                        }
                                        var htmlTemp = '<div class="email-interactions-view"><div class="email-messages" onclick="hide('+index+')"><div id="from_email_'+index+'" class="email-header-parent email-body-custom">' +
                                            '<div class="email-from-custom" style="width: 50%;"><span class="email-header-label email-label-custom">From&nbsp;</span>' + (emailTranscript.from.email) + '</div>' +
                                            '<div id="date_email_'+index+'" class="email-time email-label-custom" style="width: 50%; text-align: right;">' + getDateFormatted(emailTranscript.time) + '</div></div>' +
                                            '<div id="to_email_'+index+'" class="email-body-custom"><span class="email-to-label email-label-custom">To&nbsp;</span>' + (emailTranscript.to[0].email) + '</div>' +
                                            '<div id="subject_email_'+index+'" class="email-body-custom"><span class="email-subject-label email-label-custom">Subject&nbsp;</span>' + (emailTranscript.subject) + '</div></div>'
                                        if (emailTranscript.htmlBody != undefined) {
                                            htmlTemp += "<div id='BodyEmail_"+index+"'></br>" + emailTranscript.htmlBody + "</br></div>";
                                        } else {
                                            htmlTemp += "</br><p id='BodyEmail_"+index+"'>" + emailTranscript.textBody + "</p></br>";
                                        };
                                        containerTemp.innerHTML = htmlTemp;
                                        centerContainer.appendChild(containerTemp);

                                        if(index>0){ hide(index); }

                                        document.getElementById("playback-container").style.display = "";
                                    }
                                    break;
                                case "message":
                                    console.log('Type message: ',result)
                                    if(index==0)document.getElementById("chatTranscriptContainer").innerHTML="";  
                                    var messagingTranscript = currentInteraction.messagingTranscript;
                                    var messaginPane = document.getElementById("chatTranscriptContainer");                                                             
                                    document.getElementById("chatTranscriptContainer").style.display = "";
                                    document.querySelectorAll(".head-form-group-custom")[0].style.display = "";
                                    document.querySelectorAll(".chat-transcript-view-custom")[0].style.minHeight = "346px";
    
                                    if (messagingTranscript !== undefined) {
                                        messagingTranscript.forEach(function (element) {                                   
                                            manageMessage(messaginPane,element);
                                        });                                                    
                                        document.querySelectorAll(".chat-transcript-view-custom")[0].style.minHeight = "235px";
                                        document.getElementById("playback-container").style.display = "";
                                        document.getElementById("loader").style.display = "none";
                                    }
                                    else {
                                        document.getElementById("Error").innerHTML = "<span style='color:red;font-size:4em;top:150px;position:relative;'>" + "Chat transcript not found" + "</span>";
                                        document.getElementById("Error").style.display = "block"; document.getElementById("loader").style.display = "none";
                                        return;
                                    }
                                    break;
                                default:
                                    console.log('Another mediaType')
                                    break;
                            }
                        }
                    }
                }).catch(function (error) {
                    if(!error_404)document.getElementById("playback-container").style.display = "none";
                    document.getElementById("loader").style.display = "none";
                    if(error.status == 403){                    
                        manageError(error, conversationId);
                        error_403 = true;
                        document.querySelector(".body-custom").style.display = "none";
                        document.querySelector(".tab-panels-custom").style.display = "none";
                    }
                });


            }

            function manageMessageContent(element,clazz){
                let app = `<div class="message ${clazz}">`;
                if ( element.messageText ){
                    app += `<span class="message-text-body">${element.messageText}</span>`;
        
                }else if( element.messageMediaAttachments ){
                    app += `<div class="message-attachment">`;
                    element.messageMediaAttachments.forEach(x => {
                        app += `<img  src="${x.url}">`;
                    });
                    app += "</div>";
                }
                app += "</div>";
                return app;
            }
            function manageMessage(messaginPane,element){
                var containerTemp = document.createElement("div");
                var htmlTemp;
                if (element.fromUser !== undefined) {

                htmlTemp =`
                    <div class="messages-message-custom agent">
                        <div class="person-img-right-custom person-img-small">
                            <span class="person-img-icon-custom">${peopleSvg()}</span>
                        </div>
                        <div class="message-body box-messages-right-custom">
                            <div class="message box-right sb1-custom">${manageMessageContent(element,"")}</div>
                            <div class="message-footer">
                                <div class="message-time">${new Date(element.timestamp).toDateString()} ${formatAMPM(new Date(element.timestamp))}</div>
                                <div class="message-time">${element.fromUser.name}</div>
                            </div>
                        </div>    
                    </div> 
                    `;

                } else if (element.fromExternalContact || element.from) {
                    htmlTemp =`
                    <div class="messages-message-custom">
                        <div class="person-img-left-custom person-img-small">
                            <span class="person-icon">${peopleSvg()}</span>
                        </div>
                        <div class="message-body box-messages-left-custom">
                            <div class="message-body box-messages-left-custom">${manageMessageContent(element,"box-left sb2-custom")}</div>
                            <div class="message-footer">
                                <div class="message-time">${new Date(element.timestamp).toDateString()} ${formatAMPM(new Date(element.timestamp))}</div>
                            </div>
                        </div>
                    </div>
                    `;
                    
                    
                } 
                containerTemp.innerHTML = htmlTemp;
                messaginPane.appendChild(containerTemp);
            }

            function formatAMPM(date) {
                var hours = date.getHours();
                var minutes = date.getMinutes();
                var ampm = hours >= 12 ? 'pm' : 'am';
                hours = hours % 12;
                hours = hours ? hours : 12; // the hour '0' should be '12'
                minutes = minutes < 10 ? '0'+minutes : minutes;
                var strTime = hours + ':' + minutes + ' ' + ampm;
                return strTime;
            }

            async function buildWaves(currentInteraction){
                var uriAudio = currentInteraction.mediaUris[0].mediaUri;
                var waveData = currentInteraction.mediaUris[0].waveformData;
                if ( !uriAudio ){
                    document.getElementById("Error").innerHTML = "<span style='color:red;font-size:4em;top:150px;position:relative;'>" + "Audio transcript not found" + "</span>";
                    document.getElementById("Error").style.display = "block";
                    document.getElementById("loader").style.display = "none";
                    return;
                }
                console.log("file : ", uriAudio);
                document.getElementById("chatTranscriptContainer").innerHTML="";  
                document.getElementById("chatTranscriptContainer").style.display = "";
                document.querySelectorAll(".head-form-group-custom")[0].style.display = "";
                document.getElementById("playback-container").style.display = "";
                document.getElementById("chatTranscriptContainer").innerHTML = document.getElementById("chatTranscriptContainer").innerHTML + "<div style='width:80%;padding:36px 0px;margin:auto'  id='waveform'></div>";
    
                var wavesurfer = WaveSurfer.create({
                    container: '#waveform',
                    waveColor: '#a9a9a9',
                    progressColor: '#2048bc',
                    partialRender : 'true',
                    pixelRatio :1,
                    height : 128,
                   
                    mediaControls : true,
                    backend : "MediaElement",
                    mediaType : "audio",
                    normalize : true,
                    xhr :{ cache: 'default', mode: 'no-cors'}
                });
                wavesurfer.on('ready', function () {
                });
            
            let app = [];
            waveData.forEach(i => app.push(i - 0.5))
            wavesurfer.load(uriAudio,app);
            }

            function isFullwidth(string){
                let email_div = document.getElementById(string);
                if(email_div.style.background == "var(--color-grey-primary)"){
                    email_div.style.background = "var(--color-white)";                
                    email_div.style.borderBottom = "";
                }
                else{
                    email_div.style.background = "var(--color-grey-primary)";
                    email_div.style.borderBottom = "1px solid";
                    email_div.style.padding = "10px 0";
                }
            }

            function hide(index){            
                isFullwidth("from_email_"+index);
                isHidden("to_email_"+index);
                isHidden("subject_email_"+index);
                isHidden("BodyEmail_"+index);
            }

            function isHidden(string){
                if(document.getElementById(string).style.display=="none")document.getElementById(string).style.display = "";
                else document.getElementById(string).style.display = "none"
            }
            
            function rtrim(str) {
                if(!str) return str;
                return str.replace(/<p><br[\/]?><[\/]?p>/g, '');
            }

            function printError(error) {
                var htmlError = "";
                htmlError += '<div id="errorContainer" class="empty-interaction-indicator"><div id="iconError" class="empty-interaction-icon"><i "iconTimes" class="fas fa-times"></i><div>'
                htmlError += '<div><h5 style="color:#000">' + error + '</h5></div>'
                document.getElementById("messageError").innerHTML = htmlError;
                document.getElementById("errorContainer").style.width = "100%";    
                document.getElementById("errorContainer").style.position = "absolute";
                document.getElementById("iconError").style.width = "100%";
                document.getElementById("errorContainer").style.textAlign = "center";
                document.getElementById("loader").style.display = "none";
            }

            function printArchivedMessage() {
                var htmlError = "";
                var link = "https://apps." + environment + "/directory/#/engage/admin/interactions/" + interactionId;
                htmlError += '<div id="errorContainer" class="empty-interaction-indicator"><div id="iconError" class="empty-interaction-icon"><i "iconTimes" class="fas fa-times"></i><div>'
                htmlError += '<div><h5 style="color:#000">The conversation has been archived. You can manage it from the following </h5><a target="_blank" href=' + link + '>link</a></div>'
                document.getElementById("messageError").innerHTML = htmlError;
                document.getElementById("errorContainer").style.width = "100%";            
                document.getElementById("errorContainer").style.position = "absolute";
                document.getElementById("iconError").style.width = "100%";
                document.getElementById("errorContainer").style.textAlign = "center";
                document.getElementById("loader").style.display = "none";
            }

        </script>
        <style>
            
        </style>
        
        <div id='loader' class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>

        <div id="messageError"></div>
        
        <div class="body-custom" style="display:none;">
            <div class="body-messages-custom">
                <div class="conversation-participant-container-custom end-align-custom">
                    <div class="participant-heading-custom" data-bind="lString: labelKey">Internal</div>
                        <div id="participantBody" class="person-card-custom">
                            <!--class="participant-body"-->
                            <span id="iconInternalParticipant" class="person-icon-custom">
                                <i class="profile-custom icon-custom"></i>
                            </span>
                            <span id="internalParticipanName" data-bind="text: nameDisplayString"></span>
                        </div>
                    </div>

                <!--<div id="footerInternalParticipant" style="display: none" class="participant-footer">
                        <div class="dropdown open" data-bind="dropdown: isOpen">
                            <a href="#" class="btn dropdown-toggle show-multiples">
                                <span data-bind="lString: 'playback.participants'">Participants</span>
                                <i class="fas fa-chevron-down" onclick="dropMenu()"></i>
                            </a>
                            <div id="dropMenu" style="display: none" class="multiple-participants-list dropdown-menu">
                            </div>
                        </div>
                    </div>-->
                    <div class="conversation-participant-container-custom start-align-custom">
                        <div class="participant-heading-custom" data-bind="lString: labelKey">External</div>
                        <div>
                            <span class="person-icon-custom">
                                <i class="profile-custom icon-custom" style="line-height: 1.5;"></i>
                            </span>
                            <span id="externalParticipanName"></span>
                        </div>
                    </div>

            </div>
            <div id="playback-container" style="display: none" class="body-messages-custom-chat">
                <div class="comunication-type-custom" id="typeOfComunication"></div>
                <div class="head-form-group-custom" style="display: none;">
                    <div class="details-col-custom">
                        <div class="header-header-custom"><span class="header-header-custom">Start Time</span></div>
                        <div class="header-value-custom"><span class="header-start-time-custom" id="startTimeHeader"></span>
                        </div>
                    </div>
                    <div class="details-col-custom">
                        <div class="header-header-custom"><span class="header-header-custom">Duration</span></div>
                        <div class="header-value-custom"><span class="header-duration-custom" id="durationTimeHeader"></span></div>
                    </div>
                    <div class="details-col-custom">
                        <div class="header-header-custom"><span class="header-header-custom">End Time</span></div>
                        <div class="header-value-custom"><span class="header-end-time-custom" id="endTimeHeader"></span></div>
                    </div>
                </div>
                <div class="panel-heading-custom" id="titleTranscript" style="display: none;">Chat Log</div>
                <div id="chatTranscriptContainer" style="display: none" class="chat-transcript-view-custom">
                    <div class="chat-message-row">
                        <div class="chat-cell message">Hi</div>
                        <div class="chat-cell name">
                            <div class="pull-right">Guest</div>
                        </div>

                        <div class="chat-cell time">
                            <div class="pull-right">3:56 PM</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-panels-custom" style="display:none;">
            <div style="width: 100%;float:left;">
                <button id="button_detail" onclick="onClick();" class="button-detail-custom">Detail</button>
            </div>
            <div id="details" class="panel-body-custom details-tab-content-custom">
                <div class="form-group-custom">
                    <h4 class="conversation-metrics-header-custom">Interaction Metrics</h4>
                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">Interaction Type</span></div>
                        <div class="details-value-custom"><span class="details-value-interaction"
                                id="interactionType"></span></div>
                    </div>
                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">Interaction ID</span></div>
                        <div class="details-value-custom"><span class="details-interaction-id"
                                id="InteractionIdValue"></span></div>
                    </div>                
                    <div id="direction" class="details-row-custom" style="display: none;">
                        <div class="details-header-custom"><span class="details-header-custom">Direction</span></div>
                        <div class="details-value-custom"><span class="details-interaction-id"
                                id="directionValue"></span></div>
                    </div>
                    <div id="MessageType" class="details-row-custom" style="display:none;">
                        <div class="details-header-custom"><span class="details-header-custom">Message Type</span></div>
                        <div class="details-value-custom"><span class="details-value-message"
                                id="MessageTypeValue"></span></div>
                    </div>
                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">Start Time</span></div>
                        <div class="details-value-custom"><span class="details-start-time-custom" id="startTimeValue"></span>
                        </div>
                    </div>
                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">End Time</span></div>
                        <div class="details-value-custom"><span class="details-end-time" id="endTimeValue"></span></div>
                    </div>

                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">Queue</span></div>
                        <div class="details-value-custom"><span class="details-duration-custom" id="queueValue"></span>
                        </div>
                    </div>
                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">Duration</span></div>
                        <div class="details-value-custom"><span class="details-duration-custom"
                                id="durationTimeValue"></span></div>
                    </div>
                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">Internal
                                Participant</span>
                        </div>
                        <div class="details-value-custom"><span class="details-duration-custom"
                                id="internalParticipantValue"></span></div>
                    </div>
                    <div class="details-row-custom">
                        <div class="details-header-custom"><span class="details-header-custom">External
                                Participant</span>
                        </div>
                        <div class="details-value-custom"><span class="details-end-time-custom"
                                id="externalParticipantValue"></span></div>
                    </div>
                </div>
                <div class="form-group-custom">
                    <h4 class="conversation-metrics-header-custom">Wrap-up Information</h4>
                    <div class="details-row-custom">
                        <span class="details-header-custom">Name</span>
                        <span class="details-value-custom">
                            <span class="details-email-type-custom" id="wrapUpName"></span>
                        </span>
                    </div>
                    <div class="details-row-custom">
                        <span class="details-header-custom">Code</span>
                        <span class="details-value-custom details-start-time-custom" id="wrapUpCode"></span>
                    </div>
                    
                    <div class="details-row-custom">
                        <span class="details-header-custom">Note</span>
                        <span class="details-value-custom details-start-time-custom" id="wrapUpNotes"></span>
                    </div>
                </div>
            </div>
        </div>
    </body>

</html>