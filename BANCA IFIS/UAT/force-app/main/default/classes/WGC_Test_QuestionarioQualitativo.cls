@isTest
public class WGC_Test_QuestionarioQualitativo {
  
    /*@isTest
    public static void TestAll(){
        //creo i dati di test
        WGC_AllDataFactory.disattivaTrigger();
       
        Account acc = new Account();
        Integer rand = Integer.valueOf(Math.Random());
        acc.Name = 'Test_Account'+rand;
        acc.NDGGruppo__c = String.valueOf(rand);
        insert acc;

        String accId = [SELECT Id, Name FROM Account LIMIT 1].Id;

        //Dati custom settings per costruire l'input wrapper per le chiamate ai servizi
        ImpostazioniServizi__c is = new ImpostazioniServizi__c();
        is.Name = 'TestIS'+rand;
        is.CodiceIstituto3N__c = '121';

        insert is;

        EndpointServizi__c es = new EndpointServizi__c();
        es.Name = 'settings';
        es.LAGKeyHeroku__c = 'B3DAF392-AF8C-4687-8387-48261E9A63FD';
        es.LAGKey__c = 'B3DAF392-AF8C-4687-8387-48261E9A63FD';
        es.URLDatiBilancio__c = 'https://uatservices.bancaifis.it/arch/lag/proxy/anagrafica/anagraficacompositeservice/datibilancio';
        es.URLModificaDatiAggiuntiviQQ__c = 'https://uatservices.bancaifis.it/arch/lag/proxy/anagrafica/modificadatiaggiuntiviqqcompositeservice/modificadatiaggiuntiviqq';

        insert es;

        //Altri dati di test
        String parametro1 = '[{"value":"B","dominio":[{"value":"A","label":"Forte crescita (>10%)"},{"value":"B","label":"Lieve crescita (2%-10%)"},{"value":"C","label":"Stazionario (+/- 2%)"},{"value":"D","label":"Diminuzione (<2%)"},{"value":"E","label":"Inf non disponib./valutab."}],"domanda":"Qual e l andamento del mercato?","codiceModulo":2801,"codiceDatoDomanda":66000},{"value":"E","dominio":[{"value":"A","label":"Meno del 30%"},{"value":"B","label":"Tra il 30% e il 60%"},{"value":"C","label":"Oltre 60% con sostiuz. fornito"},{"value":"D","label":"Oltre 60% con difficolta sost"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Quanto pesano i primi 10 fornitori?","codiceModulo":2801,"codiceDatoDomanda":66001},{"value":"B","dominio":[{"value":"A","label":"Regolare"},{"value":"B","label":"Occasionalmente anomalo"},{"value":"C","label":"Irregolare"},{"value":"D","label":"Non rilevabile (nuovo rapporto"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Qual e la qualita del pagamento ai fornitori negli ultimi dodici mesi?","codiceModulo":2801,"codiceDatoDomanda":66002},{"value":"","dominio":[{"value":"A","label":"Contanti"},{"value":"B","label":"Rimesse dirette"},{"value":"C","label":"Accettazioni"},{"value":"D","label":"Assegni"},{"value":"E","label":"Ri. Ba."},{"value":"F","label":"Tratte"},{"value":"G","label":"MAV/RAV/RID"},{"value":"H","label":"Inf non disponib./non valutab."}],"domanda":"Modalita di pagamento prevalente?","codiceModulo":2801,"codiceDatoDomanda":66003},{"value":"","dominio":[{"value":"A","label":"Meno del 30%"},{"value":"B","label":"Tra il 30% e il 60%"},{"value":"C","label":"> 60% con sostiuz. clienti"},{"value":"D","label":"> 60% con difficolta sost"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Quanto pesano come fatturato i primi 10 clienti?","codiceModulo":2801,"codiceDatoDomanda":66004},{"value":"","dominio":[{"value":"A","label":"Regolare"},{"value":"B","label":"Occasionalmente anomalo"},{"value":"C","label":"Irregolare"},{"value":"D","label":"Non rilevab. (nuovo rapporto)"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Qual e la qualita degli incassi dai clienti?","codiceModulo":2801,"codiceDatoDomanda":66005},{"value":"","dominio":[{"value":"A","label":"Contanti"},{"value":"B","label":"Rimesse dirette"},{"value":"C","label":"Accettazioni"},{"value":"D","label":"Assegni"},{"value":"E","label":"Ri. Ba."},{"value":"F","label":"Tratte"},{"value":"G","label":"MAV/RAV/RID"},{"value":"H","label":"Inf non disponib./non valutab."}],"domanda":"Modalita\' di incasso prevalente?","codiceModulo":2801,"codiceDatoDomanda":66006},{"value":"","dominio":[{"value":"A","label":"Non sono presenti"},{"value":"B","label":"Presenti <30% fatturato"},{"value":"C","label":"Presenti >30% fatturato"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Le commesse del settore pubblico sono?","codiceModulo":2801,"codiceDatoDomanda":66007},{"value":"","dominio":[{"value":"A","label":"< 1 A: prima altro core bsn"},{"value":"B","label":"1< A <3: prima altro core bsn"},{"value":"C","label":"> 3 A: prima altro core bsn"},{"value":"D","label":"Sempre attuale core bsn"},{"value":"E","label":"Start up (< 1 A)"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"Da quanto tempo il gruppo/azienda opera nel core business attuale?","codiceModulo":2802,"codiceDatoDomanda":66008},{"value":"","dominio":[{"value":"A","label":"SI"},{"value":"B","label":"No"},{"value":"C","label":"Inf non disponib./non valutab."}],"domanda":"L\'azienda e\' puntuale nella presentazione della documentazione contabile?","codiceModulo":2803,"codiceDatoDomanda":66013},{"value":"","dominio":[{"value":"A","label":"Si, PSP disponibile. Si inv"},{"value":"B","label":"Si, PSP disponibile. No inv"},{"value":"C","label":"Si, PSP non disponib. Si inv"},{"value":"D","label":"Si, PSP non disponib. No inv"},{"value":"E","label":"No PSP"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"Piano Sviluppo Plurienn. PSP. Per i prox 12 mesi previsti programmi di investimento di rilievo?","codiceModulo":2803,"codiceDatoDomanda":66015},{"value":"","dominio":[{"value":"A","label":"Magg. az. di una sola famiglia"},{"value":"B","label":"Patti sind. blindano maggior."},{"value":"C","label":"Fraz.azionario:difficile acq."},{"value":"D","label":"Fraz.azionario:possibile acq."},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Costituzione della base proprietaria?","codiceModulo":2804,"codiceDatoDomanda":66016},{"value":"","dominio":[{"value":"A","label":"Si:problema non significativo"},{"value":"B","label":"No"},{"value":"C","label":"Si, con grado profess.le basso"},{"value":"D","label":"Si, con grado profess.le medio"},{"value":"E","label":"Si, con grado profess.le alto"}],"domanda":"In azienda sono presenti successori?","codiceModulo":2804,"codiceDatoDomanda":66019},{"value":"","dominio":[{"value":"A","label":"No"},{"value":"B","label":"Si, valore <10% patr. Netto"},{"value":"C","label":"Si, valore >=10% patr. Netto"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Esistono rischi legati a cause legali pendenti e/o contenziosi fiscali e previdenziali?","codiceModulo":2805,"codiceDatoDomanda":66020},{"value":"","dominio":[{"value":"A","label":"Si, entita ridotta"},{"value":"B","label":"Si, entita media, coperti"},{"value":"C","label":"Si, entita media, non coperti"},{"value":"D","label":"Si, entita elevata, coperti"},{"value":"E","label":"Si, entita elev. non coperti"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"L impresa ha rischi operativi ambientali, tecnologici, di immagine e ha prodotti pericolosi?","codiceModulo":2805,"codiceDatoDomanda":66021},{"value":"","dominio":[{"value":"A","label":"Bilancio cert. senza eccezioni"},{"value":"B","label":"Bilancio cert. con eccezioni"},{"value":"C","label":"Bilancio non certificato"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Eventuale certificazione del bilancio da parte di societa di revisione?","codiceModulo":2805,"codiceDatoDomanda":66022},{"value":"","dominio":[{"value":"A","label":"Si, tutte per settore appart."},{"value":"B","label":"In corso una o piu richieste"},{"value":"C","label":"No"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Ottenimento di certificazioni di qualita?","codiceModulo":2805,"codiceDatoDomanda":66023},{"value":"","dominio":[{"value":"A","label":"no."},{"value":"B","label":"Si, con una stelletta"},{"value":"C","label":"Si, da 1 stel. + a 2 stel. 2 +"},{"value":"D","label":"Si, con tre stellette"}],"domanda":"La societa ha ottenuto il Rating di Legalita AGCM ?","codiceModulo":2806,"codiceDatoDomanda":66024}]';
        String parametro2 = '{"attributes":{"type":"QuestionarioQualitativo__c","url":"/services/data/v44.0/sobjects/QuestionarioQualitativo__c/a0J1x000000IgHkEAK"},"Istruzione12__c":"La domanda mira a comprendere quale sia la costituzione, tra le diverse possibili, della base proprietaria dell’azienda. Infatti, la tipologia di costituzione della base proprietaria può fornire indicazioni in merito alla stabilità attuale ed all’evoluzione futura dell’azienda, nonché sull’eventuale possibilità di operazioni di acquisizione della base azionaria da parte di aziende esterne.","Domanda17__c":"Ottenimento di certificazioni di qualità?","Domanda8__c":"Le commesse del settore pubblico sono?","Istruzione18__c":"La domanda è volta ad individuare le imprese che, in possesso di determinati requisiti indicativi del rispetto della legalità da parte delle stesse, hanno richiesto ed ottenuto dall’AGCM il Rating di Legalità. Sulla base delle dichiarazioni che l’impresa autocertifica nella domanda presentata all’Autorità, l’AGCM può attribuire all’impresa un rating che avrà un range tra un minimo di una “stelletta” ad un massimo di tre “stellette”. Oltre ai requisiti di base, necessari per l’attribuzione di una “stelletta”, le tre “stellette” si raggiungono al ricorrere di 6 ulteriori requisiti: per ognuno di questi, il rating potrà essere incrementato di un “+”; tre “+” equivalgono a una ulteriore “stelletta”.","Istruzione10__c":"La risposta è “sì”, quando il cliente non solo è puntuale alla richiesta della documentazione contabile, ma le comunicazioni sono dettagliate ed esaustive (bilanci ufficiali/intermedi/ informazioni sulle strategie future e/o altri tipi di notizie). La risposta è “no” quando il cliente ritarda e/o rinvia la documentazione contabile.","Istruzione16__c":"La certificazione di bilancio è il procedimento grazie al quale il bilancio di una società viene controllato da un soggetto esterno al fine di verificare che esso corrisponda con le scritture contabili dell’impresa, rispetti le norme previste dalla legge per la redazione di tale documento e rappresenti in modo fedele la realtà aziendale. La certificazione di bilancio viene effettuata da società di revisione specializzate, iscritte in un apposito albo. La relazione della società di revisione può evidenziare, o meno, la presenza di eccezioni. La fonte principale da cui trarre indicazioni è il bilancio della società. ","Istruzione14__c":"La presenza di significative vertenze in corso di tipo legale con fornitori o clienti, di contenzioso con l’erario e gli enti previdenziali è motivo di potenziale criticità che viene correttamente valorizzata con queste domande. Pertanto il gestore deve porre queste domande al cliente al fine di verificare per esempio se negli ultimi 12 mesi vi sono stati ritardi, richieste di dilazione, richieste di rinegoziazione dei debiti contratti con l’erario, gli enti previdenziali, nonché criticità nella corresponsione di salari e stipendi. Occorre prestare particolare attenzione alle poste del passivo corrente del bilancio, dove a volte tali vertenze non sono riesposte correttamente tra le poste di bilancio debiti tributari – ist. previdenziali, ma si annidano tra i debiti diversi.","Domanda2__c":"Quanto rappresentano in termini di acquisto i primi 10 fornitori?","Istruzione3__c":"La qualità storica dei pagamenti (orientativamente nell’ultimo anno) è suddivisa tra tre tipologie di risposte. Le fonti principali da cui trarre indicazioni si trovano nell’operatività quotidiana tra il cliente e la banca (richieste di dilazioni, proroghe di scadenze, disposizioni di non pagamento di effetti in scadenza domiciliati su ns. casse, ecc.) e in fonti esterne, quali informazioni commerciali e bollettini ufficiali.","Istruzione5__c":"La domanda è volta a individuare il grado di frazionamento del portafoglio clienti e, allo stesso tempo, il peso sul fatturato dei primi 10 clienti. Con un peso oltre il 60%, la dipendenza dell’impresa da pochi clienti può rappresentare una criticità che va opportunamente valutata, in quanto diminuisce sensibilmente la capacità contrattuale.","Istruzione1__c":"La domanda è volta a capire quale fase congiunturale caratterizza il settore in cui opera l’azienda. Nella fase di forte crescita (espansione) crescono la domanda e la produzione di beni e servizi con effetti, in media, positivi sulla capacità di reddito dell’azienda. Al contrario, durante i periodi in cui la domanda è stazionaria o in diminuzione, l’attività produttiva si contrae e la situazione del settore tende a peggiorare. Le fonti di informazione sono rappresentate dagli studi di settore o dalle informazioni dettagliate raccolte direttamente presso l’imprenditore. In presenza di domanda stazionaria o in diminuzione sui beni e servizi prodotti dall’impresa, occorre capire il livello di concentrazione del fatturato per prodotto, la struttura dei costi, la struttura finanziaria, la solidità patrimoniale dell’impresa e, se possibile, capire il grado di dinamicità, ovvero se l’azienda è in grado, in tempi relativamente brevi, di cambiare/trasformare il suo core business.","Domanda4__c":"Modalità di pagamento prevalente?","Domanda6__c":"Qual è la qualità degli incassi dai clienti negli ultimi dodici mesi?","Istruzione9__c":"La domanda è volta a individuare il grado di esperienza, permanenza dell’azienda nell’attuale core business. Indicare se ha sempre operato nel core business attuale o altrimenti da quanti anni (perché prima aveva un altro core business). Nel caso di start up, selezionare la risposta “e)” se l’azienda opera da meno di 1 anno nell’attuale core business.","Stato__c":"Bozza","Istruzione7__c":"La domanda è volta ad individuare le modalità di incasso, tra quelle elencate, a cui l’azienda fa maggiormente riferimento. La domanda va intesa con riferimento agli incassi ricevuti dall’azienda da parte dei clienti negli ultimi dodici mesi.","Domanda11__c":"Piano di sviluppo pluriennale? Per i prossimi dodici mesi, sono previsti programmi di investimento di rilievo?","Domanda13__c":"In azienda sono presenti successori? Se si, qual è il grado di professionalità dei successori a garanzia della continuità aziendale?","Domanda15__c":"L impresa ha rischi operativi connessi all ambiente, tecnologici, di immagine e ha prodotti pericolosi?","Domanda18__c":"La società ha ottenuto il Rating di Legalità e risulta nell’elenco delle imprese cui il rating di legalità è stato attribuito dall’Autorità Garante della Concorrenza e del Mercato (AGCM)? Se si, quale è il punteggio di Rating attribuito dall’AGCM?","Istruzione11__c":"La domanda mira ad indagare l’esistenza o meno (e la disponibilità per consultazione) di un documento aziendale strutturato che delinei le direttrici di indirizzo e sviluppo del business per i prossimi anni. La presenza di un piano di sviluppo pluriennale infatti testimonia una maggior conoscenza da parte dell’azienda delle linee evolutive che si intendono seguite. Dallo stesso piano è possibile ricavare se sono previsti o meno programmi di investimento di rilievo, che potrebbero incidere significativamente sul business dell’azienda. Se la risposta è sì, il gestore deve ottenere informazioni al fine di capire la finalità, l’entità e le fonti di copertura dell’investimento (debito/equity). In presenza di un piano economico finanziario occorre valutare l’impatto economico/finanziario che l’investimento produrrà nel tempo.","Domanda9__c":"Da quanto tempo il gruppo/azienda opera nel core business attuale?","Domanda7__c":"Modalità di incasso prevalente?","Istruzione17__c":"La certificazione di qualità di prodotti, processi e servizi è uno degli strumenti che contribuisce a rendere le imprese competitive sul mercato. La certificazione, infatti, rilasciata da un organismo di certificazione terzo e imparziale, attesta che quel prodotto, processo o servizio è conforme a una specifica norma o documento normativo e lo rende riconoscibile grazie all’esposizione di un marchio di qualità. La certificazione, e il relativo marchio, possono essere obbligatori o volontari.","Istruzione13__c":"La successione nell’impresa familiare è un tema complesso che suscita interrogativi e sfide più che mai attuali nello scenario di crisi economica in atto. L’impresa familiare o la micro impresa è spesso caratterizzata dalla presenza dell’imprenditore nel quale sono concentrate molteplici ruoli - quello del proprietario, quello dell’imprenditore e quello del manager -, e spesso ha difficoltà a delegare a terzi. Il gestore deve percepire in primis se l’imprenditore/socio sta preparando il passaggio generazionale, se ha già in corso una pianificazione aziendale nella quale ha definito i piani di sviluppo a lungo termine dell’impresa, ma soprattutto una pianificazione familiare nella quale ha definito i rapporto e il grado di coinvolgimento della famiglia nell’impresa e le regole di funzionamento. Se tali piani sono già in essere, significa che sono stati definiti i ruoli/figure chiave che i successori andranno a ricoprire ai fini della continuità aziendale e che è in atto un processo di formazione per raggiungere il grado di professionalità adeguato al ruolo designato, indipendentemente da una propria formazione scolastica/universitaria. Perciò la risposta è “sì, alto” se vale quanto detto sopra. Diversamente, in presenza di una non chiara organizzazione e definizione dei ruoli, il grado di professionalità scenderà verso il valore “medio” o addirittura “basso”, se l’imprenditore/socio vuole rimanere la figura cardine dell’impresa e non intende pianificare il momento della successione.","Istruzione15__c":"Il rischio operativo può essere definito come il rischio di perdite dovute ad errori, infrazioni, interruzioni di attività e danni causati da processi interni, dal personale o da sistemi, oppure causato da eventi esterni. Il rischio operativo può essere visto come il “prodotto” di una catena logica che combina diverse componenti, ovvero il fattore di rischio (o causa),'+ 
        'l’evento e l’effetto. Un fattore di rischio non correttamente gestito può aumentare l’esposizione al rischio o l’effetto degli eventi operativi, con conseguenti possibili danni economici.","NomeModello__c":"Small Business","Istruzione2__c":"La domanda è volta a individuare il grado di frazionamento dei fornitori e, allo stesso tempo, il peso sul fatturato dei primi 10 fornitori. Con un peso oltre il 60%, la dipendenza dell’impresa da pochi fornitori può rappresentare una criticità che va opportunamente valutata, in quanto diminuisce sensibilmente la capacità contrattuale.","Domanda3__c":"Qual è la qualità del pagamento ai fornitori negli ultimi dodici mesi?","Istruzione4__c":"La domanda è volta ad individuare le modalità di pagamento, tra quelle elencate, a cui l’azienda fa maggiormente riferimento. La domanda va intesa con riferimento ai pagamenti verso i fornitori effettuati dall azienda negli ultimi dodici mesi.","Domanda1__c":"Qual è l’andamento della domanda di mercato dei beni e servizi prodotti dall’impresa nei 12 mesi?","Domanda10__c":"L’azienda è puntuale nella presentazione della documentazione contabile?","Domanda5__c":"Quanto rappresentano in termini di fatturato i primi 10 clienti?","Istruzione8__c":"La domanda è volta ad individuare la dipendenza del business dal settore pubblico rispetto al settore privato. Si intendono commesse presenti in misura ridotta qualora il fatturato delle stesse sia inferiore al 30% del fatturato totale dell’azienda; viceversa si intendono commesse presente in misura elevata qualora il fatturato delle stesse sia superiore al 30% del fatturato totale dell’azienda. Il periodo di riferimento è dato dagli ultimi dodici mesi.","Account__c":"'+acc.Id+'","Domanda14__c":"Esistono rischi legati a cause legali pendenti e/o contenziosi fiscali e previdenziali?","Domanda12__c":"Costituzione della base proprietaria?","Id":"a0J1x000000IgHkEAK","Istruzione6__c":"La qualità storica degli incassi è suddivisa tra cinque tipologie di risposte. Le fonti principali da cui trarre indicazioni si trovano nell’operatività quotidiana tra il cliente e la banca (ritorno di effetti, richiamo di effetti, proroghe di anticipi fatture Italia/export ecc.) e in fonti esterne, quali informazioni commerciali e bollettini ufficiali","Domanda16__c":"Eventuale certificazione del bilancio da parte di società di revisione?"}';
            
        //Setto la fake response
        Test.setMock(HttpCalloutMock.class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_MODIFICA_DATI_AGGIUNTIVI_QQ));
        Test.setMock(HttpCalloutMock.Class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_DATI_BILANCIO));
        Test.startTest();

        System.debug('@@@ accId ' + accId);
        //Test 1
        WGC_QuestionarioQualitativo.getData(accId);
        //Test 2
        WGC_QuestionarioQualitativo.salvaQQ(parametro1,parametro2);

        Test.stopTest();
    }*/

    /*@isTest
    public static void Test_All2(){

        WGC_AllDataFactory.disattivaTrigger();
        List<Account> listAcc = WGC_AllDataFactory.createAccount(2,true);
        EndpointServizi__c es = new EndpointServizi__c();
        es.Name = 'settings';
        es.LAGKeyHeroku__c = 'B3DAF392-AF8C-4687-8387-48261E9A63FD';
        es.LAGKey__c = 'B3DAF392-AF8C-4687-8387-48261E9A63FD';
        es.URLDatiBilancio__c = 'https://uatservices.bancaifis.it/arch/lag/proxy/anagrafica/anagraficacompositeservice/datibilancio';
        es.URLModificaDatiAggiuntiviQQ__c = 'https://uatservices.bancaifis.it/arch/lag/proxy/anagrafica/modificadatiaggiuntiviqqcompositeservice/modificadatiaggiuntiviqq';

        insert es;
        Integer rand = Integer.valueOf(Math.Random());
        ImpostazioniServizi__c is = new ImpostazioniServizi__c();
        is.Name = 'TestIS'+rand;
        is.CodiceIstituto3N__c = '121';
        insert is;


        //Altri dati di test
        String parametro1 = '[{"value":"B","dominio":[{"value":"A","label":"Forte crescita (>10%)"},{"value":"B","label":"Lieve crescita (2%-10%)"},{"value":"C","label":"Stazionario (+/- 2%)"},{"value":"D","label":"Diminuzione (<2%)"},{"value":"E","label":"Inf non disponib./valutab."}],"domanda":"Qual e l andamento del mercato?","codiceModulo":2801,"codiceDatoDomanda":66000},{"value":"E","dominio":[{"value":"A","label":"Meno del 30%"},{"value":"B","label":"Tra il 30% e il 60%"},{"value":"C","label":"Oltre 60% con sostiuz. fornito"},{"value":"D","label":"Oltre 60% con difficolta sost"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Quanto pesano i primi 10 fornitori?","codiceModulo":2801,"codiceDatoDomanda":66001},{"value":"B","dominio":[{"value":"A","label":"Regolare"},{"value":"B","label":"Occasionalmente anomalo"},{"value":"C","label":"Irregolare"},{"value":"D","label":"Non rilevabile (nuovo rapporto"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Qual e la qualita del pagamento ai fornitori negli ultimi dodici mesi?","codiceModulo":2801,"codiceDatoDomanda":66002},{"value":"","dominio":[{"value":"A","label":"Contanti"},{"value":"B","label":"Rimesse dirette"},{"value":"C","label":"Accettazioni"},{"value":"D","label":"Assegni"},{"value":"E","label":"Ri. Ba."},{"value":"F","label":"Tratte"},{"value":"G","label":"MAV/RAV/RID"},{"value":"H","label":"Inf non disponib./non valutab."}],"domanda":"Modalita di pagamento prevalente?","codiceModulo":2801,"codiceDatoDomanda":66003},{"value":"","dominio":[{"value":"A","label":"Meno del 30%"},{"value":"B","label":"Tra il 30% e il 60%"},{"value":"C","label":"> 60% con sostiuz. clienti"},{"value":"D","label":"> 60% con difficolta sost"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Quanto pesano come fatturato i primi 10 clienti?","codiceModulo":2801,"codiceDatoDomanda":66004},{"value":"","dominio":[{"value":"A","label":"Regolare"},{"value":"B","label":"Occasionalmente anomalo"},{"value":"C","label":"Irregolare"},{"value":"D","label":"Non rilevab. (nuovo rapporto)"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Qual e la qualita degli incassi dai clienti?","codiceModulo":2801,"codiceDatoDomanda":66005},{"value":"","dominio":[{"value":"A","label":"Contanti"},{"value":"B","label":"Rimesse dirette"},{"value":"C","label":"Accettazioni"},{"value":"D","label":"Assegni"},{"value":"E","label":"Ri. Ba."},{"value":"F","label":"Tratte"},{"value":"G","label":"MAV/RAV/RID"},{"value":"H","label":"Inf non disponib./non valutab."}],"domanda":"Modalita\' di incasso prevalente?","codiceModulo":2801,"codiceDatoDomanda":66006},{"value":"","dominio":[{"value":"A","label":"Non sono presenti"},{"value":"B","label":"Presenti <30% fatturato"},{"value":"C","label":"Presenti >30% fatturato"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Le commesse del settore pubblico sono?","codiceModulo":2801,"codiceDatoDomanda":66007},{"value":"","dominio":[{"value":"A","label":"< 1 A: prima altro core bsn"},{"value":"B","label":"1< A <3: prima altro core bsn"},{"value":"C","label":"> 3 A: prima altro core bsn"},{"value":"D","label":"Sempre attuale core bsn"},{"value":"E","label":"Start up (< 1 A)"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"Da quanto tempo il gruppo/azienda opera nel core business attuale?","codiceModulo":2802,"codiceDatoDomanda":66008},{"value":"","dominio":[{"value":"A","label":"SI"},{"value":"B","label":"No"},{"value":"C","label":"Inf non disponib./non valutab."}],"domanda":"L\'azienda e\' puntuale nella presentazione della documentazione contabile?","codiceModulo":2803,"codiceDatoDomanda":66013},{"value":"","dominio":[{"value":"A","label":"Si, PSP disponibile. Si inv"},{"value":"B","label":"Si, PSP disponibile. No inv"},{"value":"C","label":"Si, PSP non disponib. Si inv"},{"value":"D","label":"Si, PSP non disponib. No inv"},{"value":"E","label":"No PSP"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"Piano Sviluppo Plurienn. PSP. Per i prox 12 mesi previsti programmi di investimento di rilievo?","codiceModulo":2803,"codiceDatoDomanda":66015},{"value":"","dominio":[{"value":"A","label":"Magg. az. di una sola famiglia"},{"value":"B","label":"Patti sind. blindano maggior."},{"value":"C","label":"Fraz.azionario:difficile acq."},{"value":"D","label":"Fraz.azionario:possibile acq."},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Costituzione della base proprietaria?","codiceModulo":2804,"codiceDatoDomanda":66016},{"value":"","dominio":[{"value":"A","label":"Si:problema non significativo"},{"value":"B","label":"No"},{"value":"C","label":"Si, con grado profess.le basso"},{"value":"D","label":"Si, con grado profess.le medio"},{"value":"E","label":"Si, con grado profess.le alto"}],"domanda":"In azienda sono presenti successori?","codiceModulo":2804,"codiceDatoDomanda":66019},{"value":"","dominio":[{"value":"A","label":"No"},{"value":"B","label":"Si, valore <10% patr. Netto"},{"value":"C","label":"Si, valore >=10% patr. Netto"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Esistono rischi legati a cause legali pendenti e/o contenziosi fiscali e previdenziali?","codiceModulo":2805,"codiceDatoDomanda":66020},{"value":"","dominio":[{"value":"A","label":"Si, entita ridotta"},{"value":"B","label":"Si, entita media, coperti"},{"value":"C","label":"Si, entita media, non coperti"},{"value":"D","label":"Si, entita elevata, coperti"},{"value":"E","label":"Si, entita elev. non coperti"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"L impresa ha rischi operativi ambientali, tecnologici, di immagine e ha prodotti pericolosi?","codiceModulo":2805,"codiceDatoDomanda":66021},{"value":"","dominio":[{"value":"A","label":"Bilancio cert. senza eccezioni"},{"value":"B","label":"Bilancio cert. con eccezioni"},{"value":"C","label":"Bilancio non certificato"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Eventuale certificazione del bilancio da parte di societa di revisione?","codiceModulo":2805,"codiceDatoDomanda":66022},{"value":"","dominio":[{"value":"A","label":"Si, tutte per settore appart."},{"value":"B","label":"In corso una o piu richieste"},{"value":"C","label":"No"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Ottenimento di certificazioni di qualita?","codiceModulo":2805,"codiceDatoDomanda":66023},{"value":"","dominio":[{"value":"A","label":"no."},{"value":"B","label":"Si, con una stelletta"},{"value":"C","label":"Si, da 1 stel. + a 2 stel. 2 +"},{"value":"D","label":"Si, con tre stellette"}],"domanda":"La societa ha ottenuto il Rating di Legalita AGCM ?","codiceModulo":2806,"codiceDatoDomanda":66024}]';
        String parametro2 = '{"attributes":{"type":"QuestionarioQualitativo__c","url":"/services/data/v44.0/sobjects/QuestionarioQualitativo__c/a0J1x000000IgHkEAK"},"Istruzione12__c":"La domanda mira a comprendere quale sia la costituzione, tra le diverse possibili, della base proprietaria dell’azienda. Infatti, la tipologia di costituzione della base proprietaria può fornire indicazioni in merito alla stabilità attuale ed all’evoluzione futura dell’azienda, nonché sull’eventuale possibilità di operazioni di acquisizione della base azionaria da parte di aziende esterne.","Domanda17__c":"Ottenimento di certificazioni di qualità?","Domanda8__c":"Le commesse del settore pubblico sono?","Istruzione18__c":"La domanda è volta ad individuare le imprese che, in possesso di determinati requisiti indicativi del rispetto della legalità da parte delle stesse, hanno richiesto ed ottenuto dall’AGCM il Rating di Legalità. Sulla base delle dichiarazioni che l’impresa autocertifica nella domanda presentata all’Autorità, l’AGCM può attribuire all’impresa un rating che avrà un range tra un minimo di una “stelletta” ad un massimo di tre “stellette”. Oltre ai requisiti di base, necessari per l’attribuzione di una “stelletta”, le tre “stellette” si raggiungono al ricorrere di 6 ulteriori requisiti: per ognuno di questi, il rating potrà essere incrementato di un “+”; tre “+” equivalgono a una ulteriore “stelletta”.","Istruzione10__c":"La risposta è “sì”, quando il cliente non solo è puntuale alla richiesta della documentazione contabile, ma le comunicazioni sono dettagliate ed esaustive (bilanci ufficiali/intermedi/ informazioni sulle strategie future e/o altri tipi di notizie). La risposta è “no” quando il cliente ritarda e/o rinvia la documentazione contabile.","Istruzione16__c":"La certificazione di bilancio è il procedimento grazie al quale il bilancio di una società viene controllato da un soggetto esterno al fine di verificare che esso corrisponda con le scritture contabili dell’impresa, rispetti le norme previste dalla legge per la redazione di tale documento e rappresenti in modo fedele la realtà aziendale. La certificazione di bilancio viene effettuata da società di revisione specializzate, iscritte in un apposito albo. La relazione della società di revisione può evidenziare, o meno, la presenza di eccezioni. La fonte principale da cui trarre indicazioni è il bilancio della società. ","Istruzione14__c":"La presenza di significative vertenze in corso di tipo legale con fornitori o clienti, di contenzioso con l’erario e gli enti previdenziali è motivo di potenziale criticità che viene correttamente valorizzata con queste domande. Pertanto il gestore deve porre queste domande al cliente al fine di verificare per esempio se negli ultimi 12 mesi vi sono stati ritardi, richieste di dilazione, richieste di rinegoziazione dei debiti contratti con l’erario, gli enti previdenziali, nonché criticità nella corresponsione di salari e stipendi. Occorre prestare particolare attenzione alle poste del passivo corrente del bilancio, dove a volte tali vertenze non sono riesposte correttamente tra le poste di bilancio debiti tributari – ist. previdenziali, ma si annidano tra i debiti diversi.","Domanda2__c":"Quanto rappresentano in termini di acquisto i primi 10 fornitori?","Istruzione3__c":"La qualità storica dei pagamenti (orientativamente nell’ultimo anno) è suddivisa tra tre tipologie di risposte. Le fonti principali da cui trarre indicazioni si trovano nell’operatività quotidiana tra il cliente e la banca (richieste di dilazioni, proroghe di scadenze, disposizioni di non pagamento di effetti in scadenza domiciliati su ns. casse, ecc.) e in fonti esterne, quali informazioni commerciali e bollettini ufficiali.","Istruzione5__c":"La domanda è volta a individuare il grado di frazionamento del portafoglio clienti e, allo stesso tempo, il peso sul fatturato dei primi 10 clienti. Con un peso oltre il 60%, la dipendenza dell’impresa da pochi clienti può rappresentare una criticità che va opportunamente valutata, in quanto diminuisce sensibilmente la capacità contrattuale.","Istruzione1__c":"La domanda è volta a capire quale fase congiunturale caratterizza il settore in cui opera l’azienda. Nella fase di forte crescita (espansione) crescono la domanda e la produzione di beni e servizi con effetti, in media, positivi sulla capacità di reddito dell’azienda. Al contrario, durante i periodi in cui la domanda è stazionaria o in diminuzione, l’attività produttiva si contrae e la situazione del settore tende a peggiorare. Le fonti di informazione sono rappresentate dagli studi di settore o dalle informazioni dettagliate raccolte direttamente presso l’imprenditore. In presenza di domanda stazionaria o in diminuzione sui beni e servizi prodotti dall’impresa, occorre capire il livello di concentrazione del fatturato per prodotto, la struttura dei costi, la struttura finanziaria, la solidità patrimoniale dell’impresa e, se possibile, capire il grado di dinamicità, ovvero se l’azienda è in grado, in tempi relativamente brevi, di cambiare/trasformare il suo core business.","Domanda4__c":"Modalità di pagamento prevalente?","Domanda6__c":"Qual è la qualità degli incassi dai clienti negli ultimi dodici mesi?","Istruzione9__c":"La domanda è volta a individuare il grado di esperienza, permanenza dell’azienda nell’attuale core business. Indicare se ha sempre operato nel core business attuale o altrimenti da quanti anni (perché prima aveva un altro core business). Nel caso di start up, selezionare la risposta “e)” se l’azienda opera da meno di 1 anno nell’attuale core business.","Stato__c":"Bozza","Istruzione7__c":"La domanda è volta ad individuare le modalità di incasso, tra quelle elencate, a cui l’azienda fa maggiormente riferimento. La domanda va intesa con riferimento agli incassi ricevuti dall’azienda da parte dei clienti negli ultimi dodici mesi.","Domanda11__c":"Piano di sviluppo pluriennale? Per i prossimi dodici mesi, sono previsti programmi di investimento di rilievo?","Domanda13__c":"In azienda sono presenti successori? Se si, qual è il grado di professionalità dei successori a garanzia della continuità aziendale?","Domanda15__c":"L impresa ha rischi operativi connessi all ambiente, tecnologici, di immagine e ha prodotti pericolosi?","Domanda18__c":"La società ha ottenuto il Rating di Legalità e risulta nell’elenco delle imprese cui il rating di legalità è stato attribuito dall’Autorità Garante della Concorrenza e del Mercato (AGCM)? Se si, quale è il punteggio di Rating attribuito dall’AGCM?","Istruzione11__c":"La domanda mira ad indagare l’esistenza o meno (e la disponibilità per consultazione) di un documento aziendale strutturato che delinei le direttrici di indirizzo e sviluppo del business per i prossimi anni. La presenza di un piano di sviluppo pluriennale infatti testimonia una maggior conoscenza da parte dell’azienda delle linee evolutive che si intendono seguite. Dallo stesso piano è possibile ricavare se sono previsti o meno programmi di investimento di rilievo, che potrebbero incidere significativamente sul business dell’azienda. Se la risposta è sì, il gestore deve ottenere informazioni al fine di capire la finalità, l’entità e le fonti di copertura dell’investimento (debito/equity). In presenza di un piano economico finanziario occorre valutare l’impatto economico/finanziario che l’investimento produrrà nel tempo.","Domanda9__c":"Da quanto tempo il gruppo/azienda opera nel core business attuale?","Domanda7__c":"Modalità di incasso prevalente?","Istruzione17__c":"La certificazione di qualità di prodotti, processi e servizi è uno degli strumenti che contribuisce a rendere le imprese competitive sul mercato. La certificazione, infatti, rilasciata da un organismo di certificazione terzo e imparziale, attesta che quel prodotto, processo o servizio è conforme a una specifica norma o documento normativo e lo rende riconoscibile grazie all’esposizione di un marchio di qualità. La certificazione, e il relativo marchio, possono essere obbligatori o volontari.","Istruzione13__c":"La successione nell’impresa familiare è un tema complesso che suscita interrogativi e sfide più che mai attuali nello scenario di crisi economica in atto. L’impresa familiare o la micro impresa è spesso caratterizzata dalla presenza dell’imprenditore nel quale sono concentrate molteplici ruoli - quello del proprietario, quello dell’imprenditore e quello del manager -, e spesso ha difficoltà a delegare a terzi. Il gestore deve percepire in primis se l’imprenditore/socio sta preparando il passaggio generazionale, se ha già in corso una pianificazione aziendale nella quale ha definito i piani di sviluppo a lungo termine dell’impresa, ma soprattutto una pianificazione familiare nella quale ha definito i rapporto e il grado di coinvolgimento della famiglia nell’impresa e le regole di funzionamento. Se tali piani sono già in essere, significa che sono stati definiti i ruoli/figure chiave che i successori andranno a ricoprire ai fini della continuità aziendale e che è in atto un processo di formazione per raggiungere il grado di professionalità adeguato al ruolo designato, indipendentemente da una propria formazione scolastica/universitaria. Perciò la risposta è “sì, alto” se vale quanto detto sopra. Diversamente, in presenza di una non chiara organizzazione e definizione dei ruoli, il grado di professionalità scenderà verso il valore “medio” o addirittura “basso”, se l’imprenditore/socio vuole rimanere la figura cardine dell’impresa e non intende pianificare il momento della successione.","Istruzione15__c":"Il rischio operativo può essere definito come il rischio di perdite dovute ad errori, infrazioni, interruzioni di attività e danni causati da processi interni, dal personale o da sistemi, oppure causato da eventi esterni. Il rischio operativo può essere visto come il “prodotto” di una catena logica che combina diverse componenti, ovvero il fattore di rischio (o causa),'+ 
        'l’evento e l’effetto. Un fattore di rischio non correttamente gestito può aumentare l’esposizione al rischio o l’effetto degli eventi operativi, con conseguenti possibili danni economici.","NomeModello__c":"Small Business","Istruzione2__c":"La domanda è volta a individuare il grado di frazionamento dei fornitori e, allo stesso tempo, il peso sul fatturato dei primi 10 fornitori. Con un peso oltre il 60%, la dipendenza dell’impresa da pochi fornitori può rappresentare una criticità che va opportunamente valutata, in quanto diminuisce sensibilmente la capacità contrattuale.","Domanda3__c":"Qual è la qualità del pagamento ai fornitori negli ultimi dodici mesi?","Istruzione4__c":"La domanda è volta ad individuare le modalità di pagamento, tra quelle elencate, a cui l’azienda fa maggiormente riferimento. La domanda va intesa con riferimento ai pagamenti verso i fornitori effettuati dall azienda negli ultimi dodici mesi.","Domanda1__c":"Qual è l’andamento della domanda di mercato dei beni e servizi prodotti dall’impresa nei 12 mesi?","Domanda10__c":"L’azienda è puntuale nella presentazione della documentazione contabile?","Domanda5__c":"Quanto rappresentano in termini di fatturato i primi 10 clienti?","Istruzione8__c":"La domanda è volta ad individuare la dipendenza del business dal settore pubblico rispetto al settore privato. Si intendono commesse presenti in misura ridotta qualora il fatturato delle stesse sia inferiore al 30% del fatturato totale dell’azienda; viceversa si intendono commesse presente in misura elevata qualora il fatturato delle stesse sia superiore al 30% del fatturato totale dell’azienda. Il periodo di riferimento è dato dagli ultimi dodici mesi.","Account__c":"'+listAcc.get(0).Id+'","Domanda14__c":"Esistono rischi legati a cause legali pendenti e/o contenziosi fiscali e previdenziali?","Domanda12__c":"Costituzione della base proprietaria?","Id":"a0J1x000000IgHkEAK","Istruzione6__c":"La qualità storica degli incassi è suddivisa tra cinque tipologie di risposte. Le fonti principali da cui trarre indicazioni si trovano nell’operatività quotidiana tra il cliente e la banca (ritorno di effetti, richiamo di effetti, proroghe di anticipi fatture Italia/export ecc.) e in fonti esterne, quali informazioni commerciali e bollettini ufficiali","Domanda16__c":"Eventuale certificazione del bilancio da parte di società di revisione?"}';
            
        //Setto la fake response
        Test.setMock(HttpCalloutMock.class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_MODIFICA_DATI_AGGIUNTIVI_QQ));
        Test.setMock(HttpCalloutMock.Class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_DATI_BILANCIO));
        Test.startTest();
        WGC_QuestionarioQualitativo.getData(listAcc.get(0).Id);

        WGC_QuestionarioQualitativo.getData(listAcc.get(1).Id);
        //WGC_QuestionarioQualitativo.salvaQQ(parametro1,parametro2);
        Test.stopTest();
    }*/
        @isTest
        public static void Test_getData1(){
            WGC_AllDataFactory.createUtenzaDefault();
            WGC_AllDataFactory.createLagKey();
            WGC_AllDataFactory.createQuestionarioQualitativo(1,true);
            Integer rand = Integer.valueOf(Math.Random());
            ImpostazioniServizi__c is = new ImpostazioniServizi__c();
            is.Name = 'TestIS'+rand;
            is.CodiceIstituto3N__c = '121';
            insert is;
            Test.setMock(HttpCalloutMock.class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_MODIFICA_DATI_AGGIUNTIVI_QQ));
            Test.setMock(HttpCalloutMock.Class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_DATI_BILANCIO));
            Account a = [SELECT Id,Name FROM Account LIMIT 1];
            Test.startTest();
            WGC_QuestionarioQualitativo.getData(a.Id);
            Test.stopTest();
        }
        @isTest
        public static void Test_getData2(){
            WGC_AllDataFactory.createUtenzaDefault();
            WGC_AllDataFactory.createLagKey();
            WGC_AllDataFactory.createAccount(1,true);
            Integer rand = Integer.valueOf(Math.Random());
            ImpostazioniServizi__c is = new ImpostazioniServizi__c();
            is.Name = 'TestIS'+rand;
            is.CodiceIstituto3N__c = '121';
            insert is;
            Test.setMock(HttpCalloutMock.class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_MODIFICA_DATI_AGGIUNTIVI_QQ));
            Test.setMock(HttpCalloutMock.Class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_DATI_BILANCIO));
            Account a = [SELECT Id,Name FROM Account LIMIT 1];
            Test.startTest();
            WGC_QuestionarioQualitativo.getData(a.Id);
            Test.stopTest();
        }

        @isTest
        public static void Test_salvaQQ(){
            WGC_AllDataFactory.createUtenzaDefault();
            WGC_AllDataFactory.createLagKey();
            WGC_AllDataFactory.createQuestionarioQualitativo(1,true);
            Integer rand = Integer.valueOf(Math.Random());
            ImpostazioniServizi__c is = new ImpostazioniServizi__c();
            is.Name = 'TestIS'+rand;
            is.CodiceIstituto3N__c = '121';
            insert is;
            Test.setMock(HttpCalloutMock.class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_MODIFICA_DATI_AGGIUNTIVI_QQ));
            Test.setMock(HttpCalloutMock.Class, TestMockUtils.creaMockRispostaOk(TestMockUtils.PAYLOAD_DATI_BILANCIO));
            Account a = [SELECT Id,Name FROM Account LIMIT 1];
            QuestionarioQualitativo__c q = [SELECT Account__c,Id FROM QuestionarioQualitativo__c LIMIT 1];
            String strQQ = JSON.serialize(q);
            String domande = '[{"value":"B","dominio":[{"value":"A","label":"Forte crescita (>10%)"},{"value":"B","label":"Lieve crescita (2%-10%)"},{"value":"C","label":"Stazionario (+/- 2%)"},{"value":"D","label":"Diminuzione (<2%)"},{"value":"E","label":"Inf non disponib./valutab."}],"domanda":"Qual e l andamento del mercato?","codiceModulo":2801,"codiceDatoDomanda":66000},{"value":"E","dominio":[{"value":"A","label":"Meno del 30%"},{"value":"B","label":"Tra il 30% e il 60%"},{"value":"C","label":"Oltre 60% con sostiuz. fornito"},{"value":"D","label":"Oltre 60% con difficolta sost"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Quanto pesano i primi 10 fornitori?","codiceModulo":2801,"codiceDatoDomanda":66001},{"value":"B","dominio":[{"value":"A","label":"Regolare"},{"value":"B","label":"Occasionalmente anomalo"},{"value":"C","label":"Irregolare"},{"value":"D","label":"Non rilevabile (nuovo rapporto"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Qual e la qualita del pagamento ai fornitori negli ultimi dodici mesi?","codiceModulo":2801,"codiceDatoDomanda":66002},{"value":"","dominio":[{"value":"A","label":"Contanti"},{"value":"B","label":"Rimesse dirette"},{"value":"C","label":"Accettazioni"},{"value":"D","label":"Assegni"},{"value":"E","label":"Ri. Ba."},{"value":"F","label":"Tratte"},{"value":"G","label":"MAV/RAV/RID"},{"value":"H","label":"Inf non disponib./non valutab."}],"domanda":"Modalita di pagamento prevalente?","codiceModulo":2801,"codiceDatoDomanda":66003},{"value":"","dominio":[{"value":"A","label":"Meno del 30%"},{"value":"B","label":"Tra il 30% e il 60%"},{"value":"C","label":"> 60% con sostiuz. clienti"},{"value":"D","label":"> 60% con difficolta sost"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Quanto pesano come fatturato i primi 10 clienti?","codiceModulo":2801,"codiceDatoDomanda":66004},{"value":"","dominio":[{"value":"A","label":"Regolare"},{"value":"B","label":"Occasionalmente anomalo"},{"value":"C","label":"Irregolare"},{"value":"D","label":"Non rilevab. (nuovo rapporto)"},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Qual e la qualita degli incassi dai clienti?","codiceModulo":2801,"codiceDatoDomanda":66005},{"value":"","dominio":[{"value":"A","label":"Contanti"},{"value":"B","label":"Rimesse dirette"},{"value":"C","label":"Accettazioni"},{"value":"D","label":"Assegni"},{"value":"E","label":"Ri. Ba."},{"value":"F","label":"Tratte"},{"value":"G","label":"MAV/RAV/RID"},{"value":"H","label":"Inf non disponib./non valutab."}],"domanda":"Modalita\' di incasso prevalente?","codiceModulo":2801,"codiceDatoDomanda":66006},{"value":"","dominio":[{"value":"A","label":"Non sono presenti"},{"value":"B","label":"Presenti <30% fatturato"},{"value":"C","label":"Presenti >30% fatturato"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Le commesse del settore pubblico sono?","codiceModulo":2801,"codiceDatoDomanda":66007},{"value":"","dominio":[{"value":"A","label":"< 1 A: prima altro core bsn"},{"value":"B","label":"1< A <3: prima altro core bsn"},{"value":"C","label":"> 3 A: prima altro core bsn"},{"value":"D","label":"Sempre attuale core bsn"},{"value":"E","label":"Start up (< 1 A)"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"Da quanto tempo il gruppo/azienda opera nel core business attuale?","codiceModulo":2802,"codiceDatoDomanda":66008},{"value":"","dominio":[{"value":"A","label":"SI"},{"value":"B","label":"No"},{"value":"C","label":"Inf non disponib./non valutab."}],"domanda":"L\'azienda e\' puntuale nella presentazione della documentazione contabile?","codiceModulo":2803,"codiceDatoDomanda":66013},{"value":"","dominio":[{"value":"A","label":"Si, PSP disponibile. Si inv"},{"value":"B","label":"Si, PSP disponibile. No inv"},{"value":"C","label":"Si, PSP non disponib. Si inv"},{"value":"D","label":"Si, PSP non disponib. No inv"},{"value":"E","label":"No PSP"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"Piano Sviluppo Plurienn. PSP. Per i prox 12 mesi previsti programmi di investimento di rilievo?","codiceModulo":2803,"codiceDatoDomanda":66015},{"value":"","dominio":[{"value":"A","label":"Magg. az. di una sola famiglia"},{"value":"B","label":"Patti sind. blindano maggior."},{"value":"C","label":"Fraz.azionario:difficile acq."},{"value":"D","label":"Fraz.azionario:possibile acq."},{"value":"E","label":"Inf non disponib./non valutab."}],"domanda":"Costituzione della base proprietaria?","codiceModulo":2804,"codiceDatoDomanda":66016},{"value":"","dominio":[{"value":"A","label":"Si:problema non significativo"},{"value":"B","label":"No"},{"value":"C","label":"Si, con grado profess.le basso"},{"value":"D","label":"Si, con grado profess.le medio"},{"value":"E","label":"Si, con grado profess.le alto"}],"domanda":"In azienda sono presenti successori?","codiceModulo":2804,"codiceDatoDomanda":66019},{"value":"","dominio":[{"value":"A","label":"No"},{"value":"B","label":"Si, valore <10% patr. Netto"},{"value":"C","label":"Si, valore >=10% patr. Netto"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Esistono rischi legati a cause legali pendenti e/o contenziosi fiscali e previdenziali?","codiceModulo":2805,"codiceDatoDomanda":66020},{"value":"","dominio":[{"value":"A","label":"Si, entita ridotta"},{"value":"B","label":"Si, entita media, coperti"},{"value":"C","label":"Si, entita media, non coperti"},{"value":"D","label":"Si, entita elevata, coperti"},{"value":"E","label":"Si, entita elev. non coperti"},{"value":"F","label":"Inf non disponib./non valutab."}],"domanda":"L impresa ha rischi operativi ambientali, tecnologici, di immagine e ha prodotti pericolosi?","codiceModulo":2805,"codiceDatoDomanda":66021},{"value":"","dominio":[{"value":"A","label":"Bilancio cert. senza eccezioni"},{"value":"B","label":"Bilancio cert. con eccezioni"},{"value":"C","label":"Bilancio non certificato"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Eventuale certificazione del bilancio da parte di societa di revisione?","codiceModulo":2805,"codiceDatoDomanda":66022},{"value":"","dominio":[{"value":"A","label":"Si, tutte per settore appart."},{"value":"B","label":"In corso una o piu richieste"},{"value":"C","label":"No"},{"value":"D","label":"Inf non disponib./non valutab."}],"domanda":"Ottenimento di certificazioni di qualita?","codiceModulo":2805,"codiceDatoDomanda":66023},{"value":"","dominio":[{"value":"A","label":"no."},{"value":"B","label":"Si, con una stelletta"},{"value":"C","label":"Si, da 1 stel. + a 2 stel. 2 +"},{"value":"D","label":"Si, con tre stellette"}],"domanda":"La societa ha ottenuto il Rating di Legalita AGCM ?","codiceModulo":2806,"codiceDatoDomanda":66024}]';

            Test.startTest();
            WGC_QuestionarioQualitativo.salvaQQ(domande,strQQ);
            Test.stopTest();
        }
}