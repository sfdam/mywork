<aura:component implements="force:lightningQuickAction,lightning:actionOverride,force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes" 
                access="global" controller="TXT_SalesAgentModalController">
	
    <!-- HANDLERS-->
    <aura:attribute name="iconName" type="String" description="Definisce l'icona tra le standard"/>
    <aura:attribute name="title" type="String" default="" description="Title from Container Card"/>
    
    <aura:attribute name="recordId" default="" type="String"/>
    <aura:attribute name="contactId" default="" type="String"/>
    <aura:attribute name="AgentList" type="Object[]" />
    <aura:attribute name="AgentResult" type="Object[]" />
    <aura:attribute name="AgentSelected" type="Object" />

    <aura:attribute name="selectedItem" default="" type="String"/>
    
    <aura:attribute name="disableSelect" type ="Boolean" default= "false"/>
    <aura:attribute name="userInfo" type="User" default="{'sobjectType':'User'}" />

    <aura:handler name="init" value="{! this }" action="{! c.doInit }"/>

    <aura:handler event="c:TXT_SalesAgentEvent" action="{! c.resolveEvent }" />

    <lightning:navigation aura:id="navService" />    
    <lightning:overlayLibrary aura:id="overlayLib" />
    
    <lightning:card>
        <aura:set attribute="title">

            <!-- with container -->
            <lightning:layout multipleRows="false">
                <lightning:layoutItem size="10" smallDeviceSize="10" mediumDeviceSize="10" largeDeviceSize="10">
                    <lightning:icon iconName="{! 'utility:' + v.iconName }" size="small" variant="slds-icon-inverse" />
                    <div class="title">{! v.title }</div>
                </lightning:layoutItem>
            </lightning:layout>
        </aura:set>
        <div class='container-card'>
                <lightning:layout >
                    <lightning:layoutItem size="12" padding="around-small">
                        <aura:if isTrue="{!not(empty(v.AgentList))}">
                            <div>
                                <lightning:select name="select" label="{! $Label.c.TXT_SalesAgentModal_SelectAgent}" onchange="{! c.setItem }" disabled= "{!v.disableSelect}">
                                    <aura:iteration items="{!v.AgentList}" var="agent">
                                        <option class="{!agent.class}" text="{!agent.label}" value="{!agent.value}" />
                                    </aura:iteration>
                                </lightning:select>
                            </div>
                            <aura:set attribute="else">
                                <div class="slds-text-title_caps slds-align_absolute-center">
                                    {! $Label.c.TXT_SalesAgentModal_AgentNotFound }
                                </div>
                            </aura:set>
                        </aura:if>
                    </lightning:layoutItem>
                </lightning:layout>
                <lightning:layout >
                        <lightning:layoutItem size="6" padding="around-small" class="slds-text-align_left">
                            <aura:if isTrue="{! v.userInfo.Agent_List_Access__c }">
                                <div>
                                    <lightning:button variant="brand" label="{! $Label.c.TXT_SalesAgentModal_ButtonOpenAgentList}" onclick="{! c.openListView }" />
                                </div>                                
                            </aura:if>
                        </lightning:layoutItem>                                    
                    <lightning:layoutItem size="6" padding="around-small" class="slds-text-align_right">
                            <aura:if isTrue="{!not(empty(v.AgentList))}">
                                <div>
                                    <lightning:button variant="brand" label="{! $Label.c.TXT_SalesAgentModal_ButtonOpenCalendar}" onclick="{! c.openModal }" />
                                </div>
                            </aura:if>
                    </lightning:layoutItem>              
            </lightning:layout>
        </div>
    </lightning:card>
    
</aura:component>